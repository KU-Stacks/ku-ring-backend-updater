/// start - module/achv_stdy_common
(function(){cpr.core.Module.define("module/achv_stdy_common",function(a,c,b){b.depends("module/common");Achv=function(d){this._appKit=d};Achv.fnNullToZero=function(d){if(d==null||d==""){return 0}else{return d}};Achv.fnFindDuplColDS=function(j,e,o,h){var l=new Array(2);var k=0;var d=null;var g="";l[0]="success";l[1]="";var m=null;var n=j.getRowCount();for(var f=0;f<n;f++){m=j.getValue(f,e);if(m.trim().length==0){continue}if(j.getRowState(f)==cpr.data.tabledata.RowState.DELETED){continue}d=e+"=='"+m+"'"+h;g=j.findAllRow(d,(f+1),(n-1));if(g!=null&&g.length>0){k=g[0].getIndex();if(g.length>0&&j.getRowStateString(k)!="D"){l[0]="["+(f+1)+"-�됯낵 "+(k+1)+"-�� : "+o+"] ��ぉ�� 以묐났�섏뿀�듬땲��.";l[1]=f;break}}}return l};Achv.fnSetCtrlWRH=function(d,e){if(e=="W"){d.enabled=true;d.visible=true}else{if(e=="R"){d.enabled=false;d.visible=true}else{if(e=="H"){d.enabled=false;d.visible=false}}}};Achv.fnCntStr=function(e,g){var f=0;var i=-1;var h=e;if(g==null){g="$"}var d=new Array();d=h.split(g);f=d.length;return f};Achv.fnChkEssItem1Row=function(l,j,h,g){var f=Array();f[0]="success";f[1]="";f[2]="";var k=Achv.fnCntStr(j);var e=j.split("$");var d=h.split("$");for(var i=0;i<k;i++){if(ValueUtil.fixNull(l.getValue(g,e[i]))==""){f[0]="["+d[i]+"] ��ぉ�� �낅젰�섏꽭��.[�꾩닔�낅젰��ぉ]";f[1]=g;f[2]=e[i];return f}}return f};Achv.fnGetEvalSt=function(f,e){var d=f.findFirstRow("EVAL_EMPL_DT=='"+e+"'").getIndex();if(d<0){return""}else{return f.getValue(d,"EVAL_ST")}};Achv.fnGetEvalStNm=function(f,e){var d=f.findFirstRow("EVAL_EMPL_DT=='"+e+"'").getIndex();if(d<0){return""}else{return f.getValue(d,"EVAL_ST_NM")}}})})();
/// end - module/achv_stdy_common
/// start - module/common
(function(){cpr.core.Module.define("module/common",function(a,d,b){function e(){var f=cpr.core.Module.require("module/extension");this._activeLoadMask=null;this._activeSubmission=[];this.Validator=new Validator(this);this.Auth=new c(this);this.Msg=new f.MsgKit(this);this.Dialog=new f.DialogKit(this);this.Group=new f.GroupKit(this);this.Control=new f.ControlKit(this);this.SelectCtl=new f.SelectKit(this);this.Tree=new f.TreeKit(this);this.Tab=new f.TabKit(this);this.DataSet=new f.DataSetKit(this);this.Grid=new f.GridKit(this);this.FreeForm=new f.FreeFormKit(this);this.Submit=new f.SubmissionKit(this);this.EmbApp=new f.EmbeddedAppKit(this);this.MDI=new f.MDIKit(this);this.Report=new f.ReportKit(this);this.Header=new f.HeaderKit(this);this.Achv=new Achv(this)}e.prototype.moveGridData=function(l,f,k){var i=l.lookup(f);var g=l.lookup(k);var j=i.getSelectedRowIndices();if(!j||j.length==0){return}var h=i.getSelectedRows();h.forEach(function(n){var m=g.insertRow(g.rowCount,true);m.setRowData(n.getRowData());m.setState(cpr.data.tabledata.RowState.UNCHANGED)});i.deleteRow(j);i.clearSelection();g.clearSelection()};e.prototype.wrapConstraints=function(m,l,i){var h=false;if(m.getHost()&&m.getHost().modal===true){h=true}var j;var g=null;if(i==null){g=h?m.getContainer():m.getRootAppInstance().getContainer();i=h?m:m.getRootAppInstance()}else{g=i.getContainer()}j=g.getLayout();if(j instanceof cpr.controls.layouts.ResponsiveXYLayout){var k=[];var f=i.allSupportedMedias;f.forEach(function(o){var n=_.clone(l);n.media=o;k[k.length]=n});return{positions:k}}return l};e.prototype.showLoadMask=function(m,j){var g=false;if(m.getHost()&&m.getHost().modal===true){g=true}this.hideLoadMask(m);var k={position:"absolute",top:"0",bottom:"0",left:"0",right:"0"};k=this.wrapConstraints(m,k);var f=g?m.getContainer():m.getRootAppInstance().getContainer();var i=f.getLayout();var l=null;if(g&&i instanceof cpr.controls.layouts.FormLayout){l=f.getAppInstance().lookup("__loadmask__");if(l==null){l=new udc.com.loadmask4("__loadmask__")}m.floatControl(l,k)}else{if(j=="pro"){l=f.getAppInstance().lookup("__loadmask_pro__");if(l){f.replaceConstraint(l,k)}else{l=new udc.com.loadmaskprogress("__loadmask_pro__");f.addChild(l,k);f.getAppInstance().register(l)}l.module.start()}else{l=f.getAppInstance().lookup("__loadmask__");try{if(l){f.replaceConstraint(l,k)}else{l=new udc.com.loadmask4("__loadmask__");f.addChild(l,k);f.getAppInstance().register(l)}}catch(h){k=null}}}this._activeLoadMask=l};e.prototype.hideLoadMask=function(k){if(this._activeLoadMask){if(this._activeLoadMask.module&&this._activeLoadMask.module.end){this._activeLoadMask.module.end()}var g={position:"absolute",top:"-1px",left:"-1px",width:"1px",height:"1px"};if(k==null||k.getRootAppInstance()==null){k=this._getRootApp()}var h=false;if(k.getHost()&&k.getHost().modal===true){h=true}var f=h?k.getContainer():k.getRootAppInstance().getContainer();try{var j=f.getLayout();if(h&&j instanceof cpr.controls.layouts.FormLayout){k.removeFloatingControl(this._activeLoadMask)
}else{g=this.wrapConstraints(k,g);f.replaceConstraint(this._activeLoadMask,g)}}catch(i){g=null}this._activeLoadMask=null}};e.prototype._getRootApp=function(){return cpr.core.Platform.INSTANCE.lookup("app/com/inc/main").getInstances()[0]};e.prototype.getMainApp=function(f){if(f.isRootAppInstance()){return f}else{if(f.getHostAppInstance()==null){return}if(f.getHostAppInstance().isRootAppInstance()){return f}else{return this.getMainApp(f.getHostAppInstance())}}};e.prototype.isAppModified=function(h,l){var m=this.getMainApp(h);if(m==null){return false}var r=new Array();var g=m.getContainer();function j(t){var x=t.getAllRecursiveChildren();for(var u=0,s=x.length;u<s;u++){if(x[u].type=="grid"){r.push(x[u])}else{if(x[u] instanceof cpr.controls.Container&&x[u].style.getClasses().indexOf("form-box")!=-1){r.push(x[u])}else{if(x[u] instanceof cpr.controls.UDCBase){var w=x[u].getEmbeddedAppInstance();if(w){j(w.getContainer())}}else{if(x[u] instanceof cpr.controls.EmbeddedApp){var v=x[u].getEmbeddedAppInstance();if(v){j(v.getContainer())}}}}}}}j(g);var q=false;var f=null;var k="";for(var o=0,p=r.length;o<p;o++){f=r[o];if(f.type=="grid"){if(f.userAttr("ignoreModify")==="Y"||f.dataSet==null){continue}if(f.dataSet.isModified()){q=true;k=f.fieldLabel;break}}else{var n=this.Group.getBindDataSet(f.getAppInstance(),f);if(n!=null&&n.isModified()){q=true;k=f.fieldLabel;break}}}if(q&&l!=null&&l.toUpperCase()=="CRM"){if(!this.Msg.confirm("CRM-M003",[k])){return true}else{return false}}return q};e.prototype.getAllAppModifiedDataSet=function(h){var k=this.getMainApp(h);if(k==null){return false}var o=new Array();var p=new Array();var g=k.getContainer();function j(r){var v=r.getAllRecursiveChildren();for(var s=0,q=v.length;s<q;s++){if(v[s].type=="grid"){o.push(v[s])}else{if(v[s] instanceof cpr.controls.Container&&v[s].style.getClasses().indexOf("form-box")!=-1){o.push(v[s])}else{if(v[s] instanceof cpr.controls.UDCBase){var u=v[s].getEmbeddedAppInstance();if(u){j(u.getContainer())}}else{if(v[s] instanceof cpr.controls.EmbeddedApp){var t=v[s].getEmbeddedAppInstance();if(t){j(t.getContainer())}}}}}}}j(g);var f=null;for(var m=0,n=o.length;m<n;m++){f=o[m];if(f.type=="grid"){p.push(f.dataSet)}else{var l=this.Group.getBindDataSet(f.getAppInstance(),f);if(l==null){continue}p.push(l)}}return p};e.prototype.coverPage=function(i){var h=new cpr.controls.Container("comPageCover");h.style.css({"background-color":"#ededed",opacity:"0.5"});h.setLayout(new cpr.controls.layouts.XYLayout());var g=this.getMainApp(i);var f=g.getContainer();if(f.getLayout() instanceof cpr.controls.layouts.ResponsiveXYLayout){f.addChild(h,{positions:[{media:"all and (min-width: 1320px)",top:"0px",right:"0px",bottom:"0px",left:"0px"},{media:"all and (min-width: 1024px) and (max-width: 1319px)",top:"0px",right:"0px",bottom:"0px",left:"0px"},{media:"all and (min-width: 500px) and (max-width: 1023px)",hidden:false,top:"0px",right:"0px",bottom:"0px",left:"0px"},{media:"all and (max-width: 499px)",hidden:false,top:"0px",right:"0px",bottom:"0px",left:"0px"}]})
}else{f.addChild(h,{top:"0px",right:"0px",bottom:"0px",left:"0px"})}};e.prototype.validate=function(k,h,j){j=j!=null?j:"upd";if(!(h instanceof Array)){h=[h]}var g=true;for(var m=0,n=h.length;m<n;m++){var l=h[m];var f=k.lookup(h[m]);if(f instanceof cpr.controls.Grid){if(!ValueUtil.isNull(f.userAttr("masterCtrlId"))){g=this._validateGridFiltered(f,j)}else{g=this._validateGrid(f,j)}}else{if(f instanceof cpr.controls.Container){var q=this.Group.getBindContext(k,f);if(q){var o=q.grid?q.grid.dataSet:q.dataSet;var p=q.grid?q.grid.getSelectedRowIndex():q.rowIndex;if(o.getRowState(p)==cpr.data.tabledata.RowState.DELETED){continue}}g=this._validateControl(f)}else{g=this._validateControl(f)}}if(g==false){return false}}return true};e.prototype._validateControl=function(f,h){if(!f){return true}var g=true;var n=this;if(f instanceof cpr.controls.Container){var k=this._getChildren(f);var j;for(var m=0,o=k.length;m<o;m++){j=k[m];if(this._validateControl(j,f)==false){g=false;break}}return g}else{if(f instanceof cpr.controls.UDCBase){var l=f.getEmbeddedAppInstance();var k=l.getContainer().getAllRecursiveChildren();var j;for(var m=0,o=k.length;m<o;m++){j=k[m];if(this._validateControl(j,f)==false){g=false;break}}return g}else{g=this.Validator.validate(f,f.value,h);if(g==false){this._focusToTabItem(f);f.focus()}return g}}};e.prototype._validateGrid=function(f,g){g=g!=null?g:"modify";var h=f;if(!h){return false}var n=h.userAttr("dataBindCtxId");var k=this;var m=h.detail;var i=m.cellCount;var j=h.dataSet;var o=null;if(g=="all"){o=j.getRowStatedIndices(cpr.data.tabledata.RowState.INSERTED|cpr.data.tabledata.RowState.UPDATED|cpr.data.tabledata.RowState.DELETED|cpr.data.tabledata.RowState.UNCHANGED)}else{o=j.getRowStatedIndices(cpr.data.tabledata.RowState.INSERTED|cpr.data.tabledata.RowState.UPDATED)}var k=this;var l=o.some(function(p){var v=j.getRow(p);var r=null;for(var t=0;t<i;t++){r=m.getColumn(t);if(r.columnName==null||r.columnName==""){continue}if(r.columnType=="checkbox"||r.columnType=="rowindex"){continue}if(r.controlType==null||r.controlType=="output"||r.controlType=="button"||r.controlType=="img"){continue}if(v.getState()==cpr.data.tabledata.RowState.INSERTED&&(r.control&&r.control.userAttr("ignorePk")=="Y")){continue}if(k.Validator.validate(r.control,v.getValue(r.columnName),h,p,t)==false){h.userAttr("selectionChangeByValidation","true");k._focusToTabItem(h);if(ValueUtil.isNull(n)){h.setEditRowIndex(p,true);h.focusCell(p,t);var q=h.detail.getColumn(t).control;if(q instanceof cpr.controls.UDCBase){var s=q.getEmbeddedAppInstance();q=AppUtil.getUDCBindValueControl(q);if(q){s.focus(q.id)}}}else{h.selectRows(p);var u=k.Group.getDataBindedControl(j.getAppInstance(),n,r.columnName);if(u){k.Control.setFocus(u.getAppInstance(),u.id)}}return true}}return false});if(l==true){return false}return true};e.prototype._validateGridFiltered=function(f,g){g=g!=null?g:"modify";var h=f;if(!h){return false}var j=this;var n=h.userAttr("dataBindCtxId");var m=h.detail;var i=h.dataSet;var l=[];
  if(g=="all"){i.getUnfilteredRowDatas(function(p){if(p.getState()==cpr.data.tabledata.RowState.INSERTED||p.getState()==cpr.data.tabledata.RowState.UPDATED||p.getState()==cpr.data.tabledata.RowState.DELETED||p.getState()==cpr.data.tabledata.RowState.UNCHANGED){if(p.getValue(j.DataSet._REF_DEL_FLG)!="Y"){l.push(p)}}return false})}else{i.getUnfilteredRowDatas(function(p){if(p.getState()==cpr.data.tabledata.RowState.INSERTED||p.getState()==cpr.data.tabledata.RowState.UPDATED){if(p.getValue(j.DataSet._REF_DEL_FLG)!="Y"){l.push(p)}}return false})}var j=this;var o=this.Group.getControlByID(h.getAppInstance(),h.userAttr("masterCtrlId"));var k=l.some(function(z){var p=null;var x=z.getIndex();for(var u=0,v=m.cellCount;u<v;u++){p=m.getColumn(u);if(p.columnName==null||p.columnName==""){continue}if(p.columnType=="checkbox"||p.columnType=="rowindex"){continue}if(p.controlType==null||p.controlType=="output"||p.controlType=="button"||p.controlType=="img"){continue}if(z.getState()==cpr.data.tabledata.RowState.INSERTED&&(p.control&&p.control.userAttr("ignorePk")=="Y")){continue}if(j.Validator.validate(p.control,z.getValue(p.columnName),h,x,u,z,(o!=null&&o.length>0?o[0]:null))==false){j._focusToTabItem(h);var y="";if(z.getState()==cpr.data.tabledata.RowState.INSERTED){y=j.DataSet._REFKEY+" =='"+z.getValue(j.DataSet._REFKEY)+"'"}else{var q=ValueUtil.split(ValueUtil.fixNull(i.info),",");q.some(function(B,A){if(ValueUtil.isNull(B)){return false}if(y==""){y+=B+"=='"+z.getValue(B)+"'"}else{y+="&&"+B+"=='"+z.getValue(B)+"'"}})}var r=i.findFirstRow(y);if(ValueUtil.isNull(n)){h.setEditRowIndex((r!=null?r.getIndex():x),true);h.focusCell((r!=null?r.getIndex():x),u);var s=h.detail.getColumn(u).control;if(s instanceof cpr.controls.UDCBase){var w=s.getEmbeddedAppInstance();s=AppUtil.getUDCBindValueControl(s);if(s){w.focus(s.id)}}}else{h.selectRows((r!=null?r.getIndex():x));var t=j.Group.getDataBindedControl(i.getAppInstance(),n,p.columnName);if(t){j.Control.setFocus(t.getAppInstance(),t.id)}}return true}}return false});if(k==true){return false}return true};e.prototype._focusToTabItem=function(g){var f=null;g.findParent(function(j){if(j instanceof cpr.controls.TabFolder){f=j;return true}return false});if(f){var i=null;var h=f.getTabItems();g.findParent(function(j){h.some(function(k){if(k.content==j){i=k;return true}return false});return i!=null});if(i&&i!=f.getSelectedTabItem()){f.setSelectedTabItem(i)}}};e.prototype._getChildren=function(h){var i=h.getAllRecursiveChildren();function j(n,l){var k=[n];var m=n;while(m!=null){m=m.getNextControl();if(m!=null&&l.indexOf(m)>-1&&k.indexOf(m)==-1){k.push(m)}else{m=null}}return k}var g=[];i.forEach(function(k){if(i.indexOf(k.getPrevControl())==-1&&k.getNextControl()!=null){g=j(k,i)}});var f=[];i.forEach(function(k){if(g.indexOf(k)==-1){f.push(k)}});return g.concat(f)};e.prototype.getDefaultLocale=function(g){var f=g.getRootAppInstance();if(f.hasAppMethod("getDefaultLocale")){return f.callAppMethod("getDefaultLocale")}};function c(f){this._appKit=f
}c.prototype.getUserInfo=function(g,h){var f=g.getRootAppInstance();if(f.hasAppMethod("getUserInfo")){if(ValueUtil.isNull(h)){return f.callAppMethod("getUserInfo")}else{return f.callAppMethod("getUserInfo",[h])}}};c.prototype.getMenuInfo=function(f,k){var n=new cpr.utils.ObjectMap();var j=this._appKit.getMainApp(f);var o=null;if(j.__menuInfo!=null){o=j.__menuInfo}else{var g=f.getRootAppInstance();var i=g.lookup("mainMdi");if(i){var l=i.getSelectedTabItem();if(l!=null){o=l.userAttr("__menuInfo");j.__menuInfo=o}}}if(!ValueUtil.isNull(o)){var h=JSON.parse(o);if(k!=null){return ValueUtil.fixNull(h[k])}else{for(var m in h){n.put(m,ValueUtil.fixNull(h[m]))}return n}}else{return n}};c.prototype.getScreenName=function(g){var f=g.getRootAppInstance();return f.callAppMethod("getScreenName")};c.prototype.isAsgnDeptAuth=function(g){var f=this._appKit.Auth.getMenuInfo(g,"DEPT_AUTH_RCD");return f=="CMN035.0003"||f=="CMN035.0007"?true:false};c.prototype.isPrivateAuth=function(g){var f=this._appKit.Auth.getMenuInfo(g,"DEPT_AUTH_RCD");return f=="CMN035.0009"?true:false};c.prototype.isReadUseAuth=function(g){var f=this._appKit.Auth.getMenuInfo(g,"USE_AUTH_RCD");return f=="CMN045.0002"?true:false};c.prototype.setAuthCtrls=function(g,f){var h=this._appKit.getMainApp(g);if(!(f instanceof Array)){f=[f]}if(h.__AUTH_TARGET_CTRLS==null||h.__AUTH_TARGET_CTRLS==undefined){h.__AUTH_TARGET_CTRLS=[]}h.__AUTH_TARGET_CTRLS.concat(f)};c.prototype.applyAuthForCtrls=function(j,m,n,h){if(j.isRootAppInstance()){return}var o=function(q,p){q=q.replace(/[\[\]]/g,"\\$&");var s=new RegExp("[?&]"+q+"(=([^&#]*)|&|#|$)");var r=s.exec(p);return r==null?"":r[2]};var i=o("flag",top.location.href);if(!ValueUtil.isNull(h)){h=h.substr(0,3)}if(h=="338"||h=="339"||h=="340"){if(m!="1"){return}}else{if(i!=="R"&&m!="99"){return}}var g=ValueUtil.split((!ValueUtil.isNull(n)?n:""),",");var l=new Array();var f=j.getContainer();function k(q){var s=q?q.getAllRecursiveChildren():f.getAllRecursiveChildren();for(var r=0,p=s.length;r<p;r++){if(s[r].type=="udc.com.comButton"||s[r].type=="udc.com.comButtonAddDel"||s[r].type=="grid"||s[r].type=="button"||s[r].type=="container"&&g.indexOf(s[r].id)==-1&&(s[r].getLayout() instanceof cpr.controls.layouts.FormLayout)){l.push(s[r])}else{if(s[r] instanceof cpr.controls.Container){k(s[r])}}}s=null}k(f);if(!ValueUtil.isNull(j.__AUTH_TARGET_CTRLS)){l.concat(j.__AUTH_TARGET_CTRLS)}l.forEach(function(s){if(s.type=="udc.com.comButton"||s.type=="udc.com.comButtonAddDel"){s.visible=false}else{if(s.type=="grid"){for(var r=0,p=s.getChildrenCount();r<p;r++){if(s.getChildren()[r].readOnly!==true){s.getChildren()[r].readOnly=true}}}else{if(s.type=="container"){if(s.style&&s.style.getClasses().join(";").indexOf("form-box")!=-1&&s.getBindContext()!=null){s.enabled=false}}else{if(s.type=="button"){var q=s.style?s.style.getClasses().join(";"):"";if(q.indexOf("btn-commit")!=-1||q.indexOf("btn-new")!=-1||q.indexOf("btn-delete")!=-1||q.indexOf("btn-delete-save")!=-1||q.indexOf("btn-save")!=-1){s.enabled=false
}}}}}})};c.prototype.applyAuthForCtrlsByCampus=function(l,g){var k=l.lookup(g);if(k==null){return}var j=this.getUserInfo(l,"CAMPUS_FG");var i=new Array();var f=this._appKit.getMainApp(l).getContainer();function h(o){var r=o?o.getAllRecursiveChildren():f.getAllRecursiveChildren();var q;for(var p=0,n=r.length;p<n;p++){q=r[p];if(q.type=="udc.com.comButton"||q.type=="udc.com.comButtonAddDel"){q._xOriginVisible=q.visible;i.push(q)}else{if(q.type=="grid"){q._xOriginReadOnly=q.readOnly;i.push(q)}else{if(q.type=="button"){q._xOriginVisible=q.visible;i.push(q)}else{if(q.type=="container"&&(q.getLayout() instanceof cpr.controls.layouts.FormLayout)&&q.style.getClasses().indexOf("form-box")!=-1&&q.getBindContext()!=null){q._xOriginEnabled=q.enabled;i.push(q)}else{if(q instanceof cpr.controls.Container){h(q)}}}}}}r=null}h(f);var m=this;m._applyReadWriteAuthByCampusRcd(i,j==k.value?true:false);k.addEventListener("selection-change",function(n){m._applyReadWriteAuthByCampusRcd(i,j==n.newSelection[0].value?true:false)})};c.prototype._applyReadWriteAuthByCampusRcd=function(f,g){if(g===false){f.forEach(function(i){if(i.type=="udc.com.comButton"||i.type=="udc.com.comButtonAddDel"){i.visible=false}else{if(i.type=="grid"){if(i.readOnly!==true){i.readOnly=true}}else{if(i.type=="container"&&i.style&&i.style.getClasses().indexOf("form-box")!=-1&&i.getBindContext()!=null){i.enabled=false}else{if(i.type=="button"){var h=i.style?i.style.getClasses().join(";"):"";if(h.indexOf("btn-commit")!=-1||h.indexOf("btn-new")!=-1||h.indexOf("btn-delete")!=-1||h.indexOf("btn-delete-save")!=-1||h.indexOf("btn-save")!=-1){i.visible=false}}}}}})}else{f.forEach(function(i){if(i.type=="udc.com.comButton"||i.type=="udc.com.comButtonAddDel"){i.visible=!ValueUtil.isNull(i._xOriginVisible)?i._xOriginVisible:true}else{if(i.type=="grid"){i.readOnly=!ValueUtil.isNull(i._xOriginReadOnly)?i._xOriginReadOnly:false}else{if(i.type=="container"&&i.style&&i.style.getClasses().indexOf("form-box")!=-1&&i.getBindContext()!=null){i.enabled=!ValueUtil.isNull(i._xOriginEnabled)?i._xOriginEnabled:true}else{if(i.type=="button"){var h=i.style?i.style.getClasses().join(";"):"";if(h.indexOf("btn-commit")!=-1||h.indexOf("btn-new")!=-1||h.indexOf("btn-delete")!=-1||h.indexOf("btn-delete-save")!=-1||h.indexOf("btn-save")!=-1){i.visible=!ValueUtil.isNull(i._xOriginVisible)?i._xOriginVisible:true}}}}}})}};cpr.events.EventBus.INSTANCE.addFilter("selection-change",function(h){var g=h.control;var j=g.getAppInstance();if(g instanceof cpr.controls.Grid){var f=g;if(f.selectionUnit=="cell"&&f.getSelectedIndices()[0]==null){h.stopPropagation()}else{var i=f.selectionUnit!="cell"?f.getSelectedRowIndex():f.getSelectedIndices()[0]["rowIndex"];if(i<0){h.stopPropagation()}}}});cpr.events.EventBus.INSTANCE.addFilter("before-selection-change",function(g){var f=g.control;var h=f.getAppInstance();if(f instanceof cpr.controls.Grid){if(g.newSelection[0]==null||g.newSelection[0]==undefined){g.stopPropagation()}}});a.AppKit=e;d.createModel=function(){return new e()
};d.createCommonUtil=function(){var f="app/com/inc/main";return new e()};d.refreshAutoTimeOut=function(){var f=cpr.core.Platform.INSTANCE.lookup("app/com/inc/main").getInstances()[0];f.callAppMethod("resetAutoTimeAfterSubmit",[])};cpr.expression.ExpressionEngine.INSTANCE.registerFunction("getRound",function(g,f){if(isNaN(g)){return 0}else{if(g==Infinity||g==-Infinity){return 0}}return Math.round(g*(10*f))/(10*f)});cpr.expression.ExpressionEngine.INSTANCE.registerFunction("formatToNumber",function(f){if(isNaN(f)){return f}return new String(f).replace(/\B(?=(\d{3})+(?!\d))/g,",")});cpr.expression.ExpressionEngine.INSTANCE.registerFunction("formatToSSN",function(f){if(isNaN(f)){return"XXXXXX-*******"}else{return"XXXXXX-XXXXXXX"}});cpr.expression.ExpressionEngine.INSTANCE.registerFunction("formatToFRNO",function(f){if(isNaN(f)){return"******-*******"}else{return"XXXXXX-XXXXXXX"}});cpr.expression.ExpressionEngine.INSTANCE.registerFunction("unicodeToChar",function(g){function f(k){var l=[];l.push(k.indexOf("&"));l.push(k.indexOf(";"));var o=k.substring(l[0],l[1]+1);var j=k.substring(l[0]+2,l[1]);var i=parseInt(j);var n=String.fromCharCode(i);var m=k.replace(o,n);if(m.indexOf("&")!=-1){return f(m)}else{return m}}var h="";if(ValueUtil.fixNull(g).indexOf("&")!=-1){h+=f(g)}else{h=g}return h})})})();
/// end - module/common
/// start - module/createNewAppIns
(function(){cpr.core.Module.define("module/createNewAppIns",function(y,d,b){var n=false;var w="28px";var k=cpr.events.KeyCode.A;var u=null;var s=null;var j=null;var h=null;var e=false;if(n){cpr.events.EventBus.INSTANCE.addFilter("load",x)}function x(D){var C=D.control;if(C instanceof cpr.core.AppInstance){if(C.id.indexOf("Dialog")==-1){if(C.isRootAppInstance()){var E=C.getContainer().getAllRecursiveChildren().map(function(F){if(F.type=="embeddedapp"||F.type=="mdifolder"){return F}});if(!E||E.length==0){return}}var A=C;if(C.getHost()){if(C.getHost().type=="dialog"&&C.id.indexOf("udc")==-1){var B=A.getHostAppInstance();var z=B.getContainer().getAllRecursiveChildren().filter(function(F){if(F.type=="embeddedapp"){return F}})[0];if(z){h=z.getEmbeddedAppInstance()}}else{if(C.id.indexOf("udc")!=-1){if(C.getHost().type=="dialog"){return}var B=A.getRootAppInstance();var z=B.getContainer().getAllRecursiveChildren().filter(function(F){if(F.type=="embeddedapp"){return F}})[0];if(z){A=z.getEmbeddedAppInstance()}}}}u=A;m(u);a()}}}cpr.events.EventBus.INSTANCE.addFilter("selection-change",function(A){var z=A.control;if(z instanceof cpr.controls.MDIFolder){if(A.newSelection.content){if(A.newSelection.content.app){u=A.newSelection.content.app.getInstances()[0]}}}else{if(z instanceof cpr.controls.TabFolder){if(A.newSelection.content){u=A.newSelection.content.getAllRecursiveChildren().map(function(B){if(B.type=="embeddedapp"){return B.getEmbeddedAppInstance()}})[0]}}}m(u);a();return});function f(){e=true;if(u.disposed){u=h}u.getRootAppInstance().openDialog(j,{width:1000,height:500},function(z){z.ready(function(A){z.headerTitle="�곗씠�� 而댄룷�뚰듃";z.addEventListener("close",function(){e=false})})}).then(function(z){})}function a(){if(u){var z=u.getContainer();if(z){window.addEventListener("keydown",function(A){if(A.ctrlKey&&A.altKey&&A.keyCode==k){if(!e){f()}}})}}}function m(){if(u){j=u.id+"Dialog"+(Math.floor(Math.random()*100)+1);var A=u;var z=new cpr.core.App(j,{onPrepare:function(B){},onCreate:function(D,C){var B=D.getContainer();var F=new cpr.controls.ComboBox();var E=new cpr.data.DataSet();F.setItemSet(E,{label:"label",value:"value"});D.addEventListener("load",function(H){if(A.disposed){A=h}var G=A.getAllDataControls().map(function(I){if(I.type.indexOf("submission")==-1){return I.id}});E.parseData({columns:[{dataType:"string",name:"label"},{dataType:"string",name:"value"}],rows:g(G)});B.addChild(F,{top:"20px",left:"20px",width:"120px",height:w});F.selectItem(0)});F.addEventListener("selection-change",function(K){var I=B.getChildren().filter(function(M){if(M.type=="grid"||M.type=="container"){return M}})[0];B.removeChild(I);var H=A.getAllDataControls().filter(function(M){if(M.id==F.value){return M}})[0];if(H.type=="dataset"||H.type=="dataview"){var L=H.getColumnNames();L.splice(0,0,"status");var J=o(L,H);var G=new cpr.data.DataSet();G.parseData({columns:J.column,rows:J.row});q(G)}else{if(H.type=="datamap"){v(H)}}B.addChild(s,{top:"58px",left:"20px",right:"20px",bottom:"20px"})
  })}});cpr.core.Platform.INSTANCE.register(z)}}function q(z){s=new cpr.controls.Grid();s.init({dataSet:z,columnMovable:true,columnResizable:true,columns:p(z),header:{rows:[{height:w}],cells:t(z)},detail:{rows:[{height:w}],cells:t(z)}})}function v(z,B){s=new cpr.controls.Container();var A=new cpr.controls.layouts.FormLayout;A.horizontalSeparatorWidth=1;A.verticalSeparatorWidth=1;A.setColumns(["1fr","1fr"]);A.setRows(r(z));A.setUseRowShade(0,true);s.setLayout(A);s.style.css("border","1px solid black");c(s,z)}function g(A){var z=[];A.forEach(function(C){if(C){var B={};B.label=C;B.value=C;z.push(B)}});return z}function r(B){var A=[];for(var z=0;z<B.getColumnCount()+1;z++){A.push(w)}return A}function c(B,C){i(B,"KEY",0,0);i(B,"VALUE",1,0);for(var A=0;A<C.getColumnCount();A++){var z=C.getColumnNames()[A];i(B,z,0,A+1);i(B,C.getValue(z),1,A+1)}}function i(A,D,z,E,C){var B=new cpr.controls.Output();B.value=D;B.style.css("text-align","center");A.addChild(B,{colIndex:z,rowIndex:E});A.redraw()}function p(B){var A=[];for(var z=0;z<B.getHeaders().length;z++){if(z==0){A.push({width:"50px"})}else{A.push({width:"100px"})}}return A}function t(A){var B=[];for(var z=0;z<A.getHeaders().length;z++){B.push(l(z,A.getColumnNames()[z]))}return B}function l(A,B){var z={constraint:{rowIndex:0,colIndex:A},configurator:function(C){C.targetColumnName=B;C.text=B;C.targetColumnName=B;C.columnName=B}};return z}function o(C,D){var E=[];var A=[];C.forEach(function(G){var F={dataType:"string"};F.name=G;E.push(F)});for(var z=0;z<D.getRowCount();z++){var B={};C.forEach(function(F){if(F=="status"){B[F]=D.getRowStateString(z)}else{B[F]=D.getColumnData(F)[z]}});A.push(B)}return{column:E,row:A}}})})();
/// end - module/createNewAppIns
/// start - module/crypto
(function(){cpr.core.Module.define("module/crypto",function(a,c,b){var e=["charAt","430247zrjTri","11198sNdhJz","74747NQBzyS","140065QWevAw","4mMkIqj","substr","1BSuOgL","260246TsquCB","286144yBGfFr","2717HucEGV"];function d(f,g){return d=function(i,j){i=i-220;var h=e[i];return h},d(f,g)}(function(h,i){var j=d;while(!![]){try{var f=-parseInt(j(226))+parseInt(j(229))*-parseInt(j(223))+parseInt(j(221))+-parseInt(j(227))*parseInt(j(220))+-parseInt(j(222))+-parseInt(j(228))+parseInt(j(225));if(f===i){break}else{h.push(h.shift())}}catch(g){h.push(h.shift())}}}(e,167471),CryUtil={getTKey:function(o){var g=d,m="ex",l="t",f="ok",k="AezTIcLupW",n=String(o),i=10;n=n[g(230)](n.length-1),n=parseInt(n);var j=n%5,h="";if(j==4){h=k[g(224)](n)+k[g(224)]((n+4)%i)+k[g(224)]((n+3)%i)+k[g(224)]((n+2)%i)+k.charAt((n+1)%i)}else{if(j==3){h=k[g(224)](n)+k.charAt((n+3)%i)+k.charAt((n+2)%i)+k[g(224)]((n+1)%i)}else{if(j==2){h=k[g(224)](n)+k.charAt((n+2)%i)+k.charAt((n+1)%i)}else{if(j==1){h=k[g(224)](n)+k.charAt((n+1)%i)}else{h=k[g(224)](n)}}}}return"_"+m+"6"+l+f+h}})})})();
/// end - module/crypto
/// start - module/extension
(function(){cpr.core.Module.define("module/extension",function(exports,globals,module){module.depends("module/common");function MsgKit(appKit){this._appKit=appKit}MsgKit.prototype.getMsg=function(psMsgId,paArgs){if(psMsgId==null||psMsgId==""){return""}var psMsg=cpr.I18N.INSTANCE.message("NLS-"+psMsgId);if(psMsg==null||psMsg.indexOf("NLS-")>=0){return psMsgId.replace(/\\n/gi,"\n")}if(!ValueUtil.isNull(paArgs)){if(!(paArgs instanceof Array)){paArgs=[paArgs]}var regExp=psMsg.match(/\{[0-9]+\}/ig);regExp.forEach(function(exp){var idx=ValueUtil.fixNumber(exp.replace("{","").replace("}","").trim());psMsg=psMsg.replace(exp,new String(paArgs[idx]).replace(/\r\n/ig,""))})}return psMsg.replace(/\\n/ig,"\n")};MsgKit.prototype.confirm=function(psMsgId,paArgs){return confirm(this.getMsg(psMsgId,paArgs))};MsgKit.prototype.notify=function(app,psMsgId,paArgs,pbKeep){var _app=this._appKit.getMainApp(app);_app=_app!=null?_app:app;var vaChildCtrls=_app.getContainer().getChildren();var vaSubChildCtrls=null;var appHeader=null;for(var i=0,len=vaChildCtrls.length;i<len;i++){if(vaChildCtrls[i] instanceof udc.com.appHeader){appHeader=vaChildCtrls[i];break}else{if(vaChildCtrls[i].type=="container"&&vaChildCtrls[i].style.getClasses().indexOf("header-box")!=-1){vaSubChildCtrls=vaChildCtrls[i].getChildren();for(var j=0,jlen=vaSubChildCtrls.length;j<jlen;j++){if(vaSubChildCtrls[j] instanceof udc.com.appHeader){appHeader=vaSubChildCtrls[j];break}}if(appHeader!=null){break}}}}if(!ValueUtil.isNull(_app.__keep_msg)){psMsgId=_app.__keep_msg;_app.__keep_msg=""}else{if(ValueUtil.fixBoolean(pbKeep)){app.__keep_msg=psMsgId}else{_app.__keep_msg=""}}if(appHeader){var embApp=appHeader.getEmbeddedAppInstance();var optMsg=embApp.lookup("optAppMsg");optMsg.value=this.getMsg(psMsgId,paArgs);optMsg.style.animateFrom({transform:"translateY(-30px) ",opacity:"0"})}};MsgKit.prototype.alert=function(psMsgId,paArgs){alert(this.getMsg(psMsgId,paArgs))};function DialogKit(appKit){this._appKit=appKit}DialogKit.prototype.open=function(app,appid,width,height,handler,initValue,prop){if(initValue==null){initValue={}}var windowWidth=(window.innerWidth|document.body.clientWidth)-10;var windowHeight=(window.innerHeight|document.body.clientHeight)-45;if(windowWidth<width){width=windowWidth}if(windowHeight<height){height=windowHeight}if(app.targetScreen.name=="tablet"){width=Number(width);height=Number(height)>670?670:Number(height)}else{if(app.targetScreen.name=="mobile"){width=Number(width);height=Number(height)>550?550:Number(height)}else{width=Number(width)+10;height=Number(height)+45}}var dialogProp={width:width,height:height,headerVisible:(prop&&prop.headerVisible!=undefined)?prop.headerVisible:true,headerMovable:(prop&&prop.headerMovable!=undefined)?prop.headerMovable:true,headerClose:(prop&&prop.headerClose!=undefined)?prop.headerClose:true,resizable:(prop&&prop.resizable!=undefined)?prop.resizable:false};if(prop!=null&&prop.left){dialogProp.left=prop.left}if(prop!=null&&prop.top){dialogProp.top=prop.top
}app.getRootAppInstance().openDialog(appid,dialogProp,function(dialog){dialog.app.isPopup=true;dialog.app.modal=true;dialog._originWidth=dialogProp.width;dialog._originHeight=dialogProp.height;initValue._dialogRef=dialog;if((prop&&prop.headerTitle!=undefined)&&prop.headerTitle){dialog.headerTitle=prop.headerTitle}else{if(dialog.app.title){dialog.headerTitle=dialog.app.title}}if(handler){dialog.addEventListenerOnce("close",handler)}if(initValue){dialog.initValue=initValue}})};DialogKit.prototype.openModaless=function(app,appid,width,height,handler,initValue,prop){if(initValue==null){initValue={}}var windowWidth=(window.innerWidth|document.body.clientWidth)-10;var windowHeight=(window.innerHeight|document.body.clientHeight)-45;if(windowWidth<width){width=windowWidth}if(windowHeight<height){height=windowHeight}var dialogProp={width:Number(width)+10,height:Number(height)+45,modal:false,headerVisible:(prop&&prop.headerVisible)?prop.headerVisible:true,headerMovable:(prop&&prop.headerMovable)?prop.headerMovable:true,headerMax:(prop&&prop.headerMax)?prop.headerMax:true,headerClose:(prop&&prop.headerClose)?prop.headerClose:true,resizable:(prop&&prop.resizable)?prop.resizable:true};if(prop!=null&&prop.left){dialogProp.left=prop.left}if(prop!=null&&prop.top){dialogProp.top=prop.top}app.getRootAppInstance().openDialog(appid,dialogProp,function(dialog){dialog.app.isPopup=true;dialog.app.modal=false;dialog._originWidth=dialogProp.width;dialog._originHeight=dialogProp.height;if((prop&&prop.headerTitle!=undefined)&&prop.headerTitle){dialog.headerTitle=prop.headerTitle}else{if(dialog.app.title){dialog.headerTitle=dialog.app.title}}if(handler){dialog.addEventListenerOnce("close",handler)}if(initValue){dialog.initValue=initValue}})};DialogKit.prototype.isPopup=function(app){return(!ValueUtil.isNull(app.getHost())&&app.app.isPopup===true)?true:false};function GroupKit(appKit){this._appKit=appKit}GroupKit.prototype.initSearchBox=function(app,psSearchBoxId,paDisableCtl,paExceptCtl,paExceptDataSets){paDisableCtl=paDisableCtl!=null?paDisableCtl:new Array();if(!(paDisableCtl instanceof Array)){paDisableCtl=[paDisableCtl]}paExceptCtl=paExceptCtl!=null?paExceptCtl:new Array();if(!(paExceptCtl instanceof Array)){paExceptCtl=[paExceptCtl]}var paExceptDataSets=paExceptDataSets!=null?paExceptDataSets:new Array();var _app=app;var _appKit=this._appKit;var vsSchBtnId="btnSearch";paDisableCtl.forEach(function(item){var ctrl=_app.lookup(item);if(ctrl){ctrl.style.addClass("data-box")}});function doAddSearchBoxEvent(ctrl){var stopYn="N";if(ctrl.type=="button"&&(ctrl.id&&ctrl.id.match("btnSearch")||ctrl.value=="議고쉶")){paExceptCtl.push(ctrl.id);vsSchBtnId=ctrl.id;ctrl.addEventListener("click",function(e){if(e.defaultPrevented===false){}})}else{if(ctrl.type=="button"||ctrl.type=="output"||ctrl.type=="img"||ctrl.visible===false||ctrl.readOnly===true){return}var eventType=(ctrl.type=="combobox"||ctrl.type=="radiobutton")?"selection-change":"value-change";ctrl.addEventListener(eventType,function(e){if(_appKit.isAppModified(_app,"CRM")){if(e.control.type=="combobox"){e.control.putValue(e.oldSelection!=null?e.oldSelection[0].value:null)
}else{if(e.control.type=="radiobutton"){e.control.putValue(e.oldSelection!=null?e.oldSelection.value:null)}else{if(e.control.type=="numbereditor"){e.control.putValue(e.oldValue!=null?e.oldValue:null)}else{if(e.control.type=="inputbox"){e.control.putValue(e.oldValue!=null?e.oldValue:null)}}}}stopYn="Y";return false}else{var dataSets=_appKit.getAllAppModifiedDataSet(_app);if(dataSets!=null&&dataSets.length>0){dataSets.forEach(function(ds){if(paExceptDataSets.indexOf(ds.id)==-1){ds.clear()}})}var vbDispatchSearch=_app.getAppProperty("dispatchSearch");if((vbDispatchSearch==null||vbDispatchSearch=="undefined"||vbDispatchSearch===false)){doShadowView(_app,false)}_app.setAppProperty("dispatchSearch",false);var header=_appKit.Group.getAllChildrenByType(_app,"udc.com.appHeader");if(vbDispatchSearch===false&&header!=null&&header.length>0){var vcCtrl=header[0].getEmbeddedAppInstance().lookup("grpButtons");if(vcCtrl){vcCtrl.enabled=false}}stopYn="N"}},paExceptDataSets);if(ctrl.type=="inputbox"&&ctrl.userAttr("autoKeydownSearch")=="Y"){ctrl.addEventListener("keydown",function(e){if(e.keyCode==cpr.events.KeyCode.ENTER){if(stopYn!="Y"){_appKit.Control.dispatchEvent(app,vsSchBtnId,"click");_appKit.Header.dispatchEvent(app,"btnSearch","click")}}})}}}function doShadowView(app,pbEnable){if(paDisableCtl.length>0){_appKit.Control.setEnable(app,pbEnable,paDisableCtl)}else{if(pbEnable===false){if(_app.lookup("grpSchShell")==null){var disableCtl=new cpr.controls.Container("grpSchShell");disableCtl.style.css({"background-color":"#ededed",opacity:"0.2"});disableCtl.setLayout(new cpr.controls.layouts.XYLayout());var vcSearchBox=_app.lookup(psSearchBoxId);var heightPosix=vcSearchBox.getActualRect()["height"];_app.getContainer().addChild(disableCtl,{top:(Number(heightPosix)+35)+"px",right:"5px",bottom:"5px",left:"5px"})}}else{_app.getContainer().removeChild(_app.lookup("grpSchShell"),true)}}}var initFocus=false;function doFocusCtrl(poCtrl){if(poCtrl.type=="button"||poCtrl.type=="output"||poCtrl.type=="img"){return}if(!initFocus){poCtrl.focus();initFocus=true}}var vaSearchBoxIds=ValueUtil.split(psSearchBoxId,",");for(var z=0,zlen=vaSearchBoxIds.length;z<zlen;z++){var vcSearchBox=app.lookup(vaSearchBoxIds[z]);if(vcSearchBox){var childCtrls=_appKit._getChildren(vcSearchBox);for(var i=0,len=childCtrls.length;i<len;i++){if(childCtrls[i] instanceof cpr.controls.UDCBase){var embApp=childCtrls[i].getEmbeddedAppInstance();embApp.getContainer().getChildren().some(function(ctrl){if(ctrl instanceof cpr.controls.Container){ctrl.getChildren().some(function(subCtrl){doAddSearchBoxEvent(subCtrl);doFocusCtrl(subCtrl)})}else{doAddSearchBoxEvent(ctrl);doFocusCtrl(ctrl)}})}else{doAddSearchBoxEvent(childCtrls[i]);doFocusCtrl(childCtrls[i])}}doShadowView(_app,false)}}};GroupKit.prototype.getDataBindedControl=function(app,psGrpId,psDataColumnNm){var _grpKit=this._appKit.Group;var vcFrf=app.lookup(psGrpId);var vaChild=vcFrf.getChildren();var vcBindCtrl=null;vaChild.some(function(ctrl,idx){if(vcBindCtrl){return true
}if(ctrl.type=="container"){vcBindCtrl=_grpKit.getDataBindedControl(app,ctrl.id,psDataColumnNm)}if(ctrl.type=="output"){return false}var bind=ctrl.getBindInfo("value");if(bind&&bind.type=="datacolumn"&&psDataColumnNm===bind.columnName){if(ctrl instanceof cpr.controls.UDCBase){vcBindCtrl=AppUtil.getUDCBindValueControl(ctrl)}else{vcBindCtrl=ctrl}return true}});return vcBindCtrl};GroupKit.prototype.getAllChildrenByType=function(app,psCtlType,poContainer,pbRecursive){var vaTypesChild=new Array();var container=app.getContainer();function getChildRecursive(psCtlType,poContainer){var vaChildCtrls=poContainer?(pbRecursive===true?poContainer.getAllRecursiveChildren():poContainer.getChildren()):(pbRecursive===true?container.getAllRecursiveChildren():container.getChildren());for(var i=0,len=vaChildCtrls.length;i<len;i++){if(vaChildCtrls[i].type==psCtlType){vaTypesChild.push(vaChildCtrls[i])}else{if(vaChildCtrls[i] instanceof cpr.controls.Container){getChildRecursive(psCtlType,vaChildCtrls[i])}else{if(vaChildCtrls[i] instanceof cpr.controls.UDCBase){var voUdcApp=vaChildCtrls[i].getEmbeddedAppInstance();if(voUdcApp){getChildRecursive(psCtlType,voUdcApp.getContainer())}}else{if(vaChildCtrls[i] instanceof cpr.controls.EmbeddedApp){var voEmbApp=vaChildCtrls[i].getEmbeddedAppInstance();if(voEmbApp){getChildRecursive(psCtlType,voEmbApp.getContainer())}}}}}}vaChildCtrls=null}getChildRecursive(psCtlType,poContainer);return vaTypesChild};GroupKit.prototype.getControlByID=function(app,paCtrlIds,poContainer){if(!(paCtrlIds instanceof Array)){paCtrlIds=[paCtrlIds]}var vaChildCtrls=new Array();var container=poContainer?poContainer:this._appKit.getMainApp(app).getContainer();function getChildRecursive(paCtrlIds,poContainer){var childCtrls=poContainer.getAllRecursiveChildren();for(var i=0,len=childCtrls.length;i<len;i++){if(paCtrlIds.indexOf(childCtrls[i].id)!=-1){vaChildCtrls.push(childCtrls[i])}else{if(childCtrls[i] instanceof cpr.controls.UDCBase){var voUdcApp=childCtrls[i].getEmbeddedAppInstance();if(voUdcApp){getChildRecursive(paCtrlIds,voUdcApp.getContainer())}}else{if(childCtrls[i] instanceof cpr.controls.EmbeddedApp){var voEmbApp=childCtrls[i].getEmbeddedAppInstance();if(voEmbApp){getChildRecursive(paCtrlIds,voEmbApp.getContainer())}}}}}}getChildRecursive(paCtrlIds,container);return vaChildCtrls};GroupKit.prototype.getBindDataSet=function(app,poContainer){var voDataSet=null;var voBindContext=this.getBindContext(app,poContainer);if(voBindContext instanceof cpr.bind.GridSelectionContext){voDataSet=voBindContext.grid.dataSet}else{if(voBindContext instanceof cpr.bind.DataRowContext){voDataSet=voBindContext.dataSet}}return voDataSet};GroupKit.prototype.getBindContext=function(app,poContainer){var voBindContext=poContainer.getBindContext();if(voBindContext==null||voBindContext==undefined){var vaChildCtrls=this.getAllChildrenByType(app,"container",poContainer);vaChildCtrls.forEach(function(ctrl){if(ctrl.getBindContext()){voBindContext=ctrl.getBindContext();return true}})}return voBindContext
};function FreeFormKit(appKit){this._appKit=appKit}FreeFormKit.prototype.init=function(app,paFreeFormId){if(!(paFreeFormId instanceof Array)){paFreeFormId=[paFreeFormId]}var vcForm=null,voBindContext=null,voDs=null;var voMap=new cpr.utils.ObjectMap();for(var i=0,len=paFreeFormId.length;i<len;i++){vcForm=app.lookup(paFreeFormId[i]);if(vcForm==null){continue}voBindContext=this._appKit.Group.getBindContext(app,vcForm);voDs=voBindContext.grid?voBindContext.grid.dataSet:voBindContext.dataSet;vcForm._originEnabled=vcForm.enabled;if(vcForm.getBindInfo("enabled")!=null){vcForm._expressEnabled=vcForm.getBindInfo("enabled").expression}if(voDs._freeforms){voDs._freeforms.push(vcForm.id)}else{voDs._freeforms=[vcForm.id]}if(voDs.getColumn(this._appKit.DataSet._PARENT_REFKEY)==null){voDs.addColumn(new cpr.data.header.DataHeader(this._appKit.DataSet._PARENT_REFKEY,"string"))}if(voDs.getColumn(this._appKit.DataSet._REFKEY)==null){voDs.addColumn(new cpr.data.header.DataHeader(this._appKit.DataSet._REFKEY,"string"))}if(voDs.getColumn(this._appKit.DataSet._REF_DEL_FLG)==null){voDs.addColumn(new cpr.data.header.DataHeader(this._appKit.DataSet._REF_DEL_FLG,"string"))}if(voMap.get(voDs.id)==null){voMap.put(voDs.id,voDs)}}var _app=app,_appKit=this._appKit;voMap.keys().forEach(function(key){voMap.get(key).addEventListener("load",function(e){var dataset=e.control;var freeforms=dataset._freeforms;freeforms.forEach(function(formId){var form=_app.lookup(formId);if(dataset.getRowCount()<1){if(form._expressEnabled){form.unbind("enabled")}form.enabled=false}else{if(!_appKit.Auth.isReadUseAuth(_app)&&form._originEnabled!==false){if(form._expressEnabled){form.bind("enabled").toExpression(form._expressEnabled)}else{form.enabled=true}}}})});voMap.get(key).addEventListener("filter",function(e){var dataset=e.control;var freeforms=dataset._freeforms;freeforms.forEach(function(formId){var form=_app.lookup(formId);if(dataset.getRowCount()<1){if(form._expressEnabled){form.unbind("enabled")}form.enabled=false}else{if(!_appKit.Auth.isReadUseAuth(_app)&&form._originEnabled!==false){if(form._expressEnabled){form.bind("enabled").toExpression(form._expressEnabled)}else{form.enabled=true}}}})})})};FreeFormKit.prototype.insertRow=function(app,psFreeFormId,psEditCol,pnRowIdx,poRowData){var vcForm=app.lookup(psFreeFormId);var voBindContext=this._appKit.Group.getBindContext(app,vcForm);var vcGrid=voBindContext.grid;var voDs=voBindContext.grid?voBindContext.grid.dataSet:voBindContext.dataSet;var vcTree=app.lookup(voDs._treeId);var rowIndex=-1;if(!ValueUtil.isNull(pnRowIdx)){rowIndex=pnRowIdx}else{if(vcTree){rowIndex=vcTree.getIndex(vcTree.getSelectionFirst())}else{rowIndex=voBindContext.grid?this._appKit.Grid.getIndex(app,voBindContext.grid.id):voBindContext.rowIndex}}var insertedRow=null;if(poRowData!=null){insertedRow=voDs.insertRowData(rowIndex,true,poRowData)}else{if(vcTree){var vsSelVal=ValueUtil.fixNull(vcTree.value);var voRow={};voRow[vcTree.itemSetConfig.label]="";voRow[vcTree.itemSetConfig.value]="";
  voRow[vcTree.itemSetConfig.parentValue]=vsSelVal;insertedRow=voDs.insertRowData(rowIndex,true,voRow);if(vsSelVal!=""){var voItem=vcTree.getItemByValue(vsSelVal);vcTree.expandItem(voItem)}}else{insertedRow=voDs.insertRow(rowIndex,true)}}if(vcTree){vcTree.selectItemByValue("DEFAULT",true);vcTree.focusItem(vcTree.getItem(insertedRow.getIndex()))}else{if(vcGrid){vcGrid.selectRows(-1,false);vcGrid.selectRows(insertedRow.getIndex(),true)}else{vcForm.redraw()}}if(vcForm._expressEnabled){vcForm.bind("enabled").toExpression(vcForm._expressEnabled)}else{vcForm.enabled=true}if(voDs.getColumn(this._appKit.DataSet._REFKEY)){voDs.setValue(insertedRow.getIndex(),this._appKit.DataSet._REFKEY,"REF_"+DateUtil.getCurrentTime())}if(!ValueUtil.isNull(vcForm.userAttr("masterCtrlId"))){var parentCtrl=vcForm.getAppInstance().lookup(ValueUtil.trim(vcForm.userAttr("masterCtrlId")));if(parentCtrl&&voDs.getColumn(this._appKit.DataSet._PARENT_REFKEY)){var pRowIndex=-1;if(parentCtrl instanceof cpr.controls.Grid){pRowIndex=this._appKit.Grid.getIndex(parentCtrl.getAppInstance(),parentCtrl.id);voDs.setValue(insertedRow.getIndex(),this._appKit.DataSet._PARENT_REFKEY,parentCtrl.dataSet.getValue(pRowIndex,this._appKit.DataSet._REFKEY))}else{if(parentCtrl instanceof cpr.controls.Container){var voBindContext=this._appKit.Group.getBindContext(parentCtrl.getAppInstance(),parentCtrl);var poDs=voBindContext.grid?voBindContext.grid.dataSet:voBindContext.dataSet;pRowIndex=voBindContext.grid?this._appKit.Grid.getIndex(parentCtrl.getAppInstance(),voBindContext.grid.id):voBindContext.rowIndex;voDs.setValue(insertedRow.getIndex(),this._appKit.DataSet._PARENT_REFKEY,poDs.getValue(pRowIndex,this._appKit.DataSet._REFKEY))}}}}if(psEditCol){var vcCtrl=this._appKit.Group.getDataBindedControl(app,vcForm.id,psEditCol);if(vcCtrl){vcCtrl.focus()}}return insertedRow};FreeFormKit.prototype.deleteRow=function(app,psFreeFormId,psAftMsg){var _this=this;var vcForm=app.lookup(psFreeFormId);var voBindContext=this._appKit.Group.getBindContext(app,vcForm);var voDs=voBindContext.grid?voBindContext.grid.dataSet:voBindContext.dataSet;var vcGrid=voBindContext.grid;var vcTree=app.lookup(voDs._treeId);var rowIndex=voBindContext.grid?this._appKit.Grid.getIndex(app,voBindContext.grid.id):voBindContext.rowIndex;if(voDs==null||voDs.getRowCount()<1){this._appKit.Msg.alert("INF-M007")}else{if(!ValueUtil.isNull(psAftMsg)){if(this._appKit.Msg.confirm("CRM-M002")){if(voDs.getRowState(rowIndex)==cpr.data.tabledata.RowState.INSERTED){if(vcForm.userAttr("detailCtrlIds")!=""){var vaDetailCtrls=ValueUtil.split(vcForm.userAttr("detailCtrlIds"),",");vaDetailCtrls.forEach(function(ctrlId){_this._appKit.DataSet.updateAllDeleteFlagForRefKey(app,ctrlId,voDs.getValue(rowIndex,_this._appKit.DataSet._REFKEY))})}voDs.revertRow(rowIndex);vcForm.redraw();if(vcGrid){vcGrid.redraw();if(voDs.getRowCount()-1<rowIndex){vcGrid.selectRows([rowIndex-1])}}if(vcTree){vcTree.redraw()}if(voDs.getRowCount()<1){vcForm.enabled=false}return false}else{voDs.setRowState(rowIndex,cpr.data.tabledata.RowState.DELETED);
  return true}}}else{if(voDs.getRowState(rowIndex)==cpr.data.tabledata.RowState.INSERTED){voDs.revertRow(rowIndex)}else{voDs.setRowState(rowIndex,cpr.data.tabledata.RowState.DELETED)}}}return false};FreeFormKit.prototype.getValue=function(app,psFreeFormId,psColumnName){var vcForm=app.lookup(psFreeFormId);var voBindContext=this._appKit.Group.getBindContext(app,vcForm);var voDs=voBindContext.grid?voBindContext.grid.dataSet:voBindContext.dataSet;var rowIndex=voBindContext.grid?this._appKit.Grid.getIndex(app,voBindContext.grid.id):voBindContext.rowIndex;return voDs.getValue(rowIndex,psColumnName)};FreeFormKit.prototype.setValue=function(app,psFreeFormId,psColumnName,psValue){var vcForm=app.lookup(psFreeFormId);var voBindContext=this._appKit.Group.getBindContext(app,vcForm);var voDs=voBindContext.grid?voBindContext.grid.dataSet:voBindContext.dataSet;var rowIndex=voBindContext.grid?this._appKit.Grid.getIndex(app,voBindContext.grid.id):voBindContext.rowIndex;voDs.setValue(rowIndex,psColumnName,psValue);vcForm.redraw()};FreeFormKit.prototype.setFocus=function(app,psFreeFormId,psColumnName){var vcForm=app.lookup(psFreeFormId);var vcCtrl=this._appKit.Group.getDataBindedControl(app,vcForm.id,psColumnName);if(vcCtrl){this._appKit.Control.setFocus(app,vcCtrl.id)}};FreeFormKit.prototype.revertRow=function(app,psFreeFormId,pnRowIndex,psEditCol){var vcForm=app.lookup(psFreeFormId);var voBindContext=this._appKit.Group.getBindContext(app,vcForm);var vcGrid=voBindContext.grid;var voDs=voBindContext.grid?voBindContext.grid.dataSet:voBindContext.dataSet;var vnRowIndex=0;if(!ValueUtil.isNull(pnRowIndex)){vnRowIndex=pnRowIndex}else{if(vcGrid){vnRowIndex=this._appKit.Grid.getIndex(vcGrid.getAppInstance(),vcGrid.id)}else{vnRowIndex=voBindContext.rowIndex}}var rowData=voDs.getRow(vnRowIndex).getRowData();for(var column in rowData){voDs.setValue(vnRowIndex,column,voDs.getOriginalValue(vnRowIndex,column))}var vcTree=app.lookup(voDs._treeId);if(vcGrid){vcGrid.redraw()}if(vcTree){vcTree.redraw()}vcForm.redraw();if(!ValueUtil.isNull(psEditCol)){var vcCtrl=this._appKit.Group.getDataBindedControl(app,vcForm.id,psEditCol);if(vcCtrl){vcCtrl.focus()}}};FreeFormKit.prototype.revertAllData=function(app,psFreeFormId){var vcForm=app.lookup(psFreeFormId);var voBindContext=this._appKit.Group.getBindContext(app,vcForm);var vcGrid=voBindContext.grid;var voDs=voBindContext.grid?voBindContext.grid.dataSet:voBindContext.dataSet;var vcTree=app.lookup(voDs._treeId);voDs.revert();if(vcGrid){vcGrid.redraw()}if(vcTree){vcTree.redraw()}vcForm.redraw()};FreeFormKit.prototype.isModified=function(app,paFreeFormId,psAftMsg){if(!(paFreeFormId instanceof Array)){paFreeFormId=[paFreeFormId]}psAftMsg=psAftMsg==null?"":psAftMsg;var modify=false;var vcGroup=null;for(var i=0,len=paFreeFormId.length;i<len;i++){if(paFreeFormId[i] instanceof cpr.controls.Container){vcGroup=paFreeFormId[i]}else{vcGroup=app.lookup(paFreeFormId[i])}var voDataSet=this._appKit.Group.getBindDataSet(app,vcGroup);if(voDataSet!=null&&voDataSet.isModified()){modify=true;
  break}}if(modify){if(psAftMsg.toUpperCase()=="CRM"){if(!this._appKit.Msg.confirm("CRM-M003",[vcGroup.fieldLabel])){return true}else{return false}}}else{if(psAftMsg.toUpperCase()=="MSG"){this._appKit.Msg.notify(app,"INF-M006")}}return modify};function SelectKit(appKit){this._appKit=appKit}SelectKit.prototype.addItem=function(app,psCtlId,psLabel,psValue,pnIndex){var vcCtl=app.lookup(psCtlId);var item;if(ValueUtil.isNull(pnIndex)){vcCtl.addItem(new cpr.controls.Item(psLabel,psValue))}else{if(pnIndex>=0&&pnIndex<=vcCtl.getItemCount()){if(pnIndex==0){item=vcCtl.getItem(pnIndex);vcCtl.insertItemBefore(new cpr.controls.Item(psLabel,psValue),item)}else{item=vcCtl.getItem(pnIndex-1);vcCtl.insertItemAfter(new cpr.controls.Item(psLabel,psValue),item)}}}};SelectKit.prototype.getItemLabel=function(app,psCtlId,pnIndex){var vcCtl=app.lookup(psCtlId);if(ValueUtil.isNull(pnIndex)){var item=vcCtl.getSelectionFirst();return item?item.label:""}else{if(vcCtl.multiple){var vaIdx=ValueUtil.split(pnIndex,",");for(var i=0,len=vaIdx.length;i<len;i++){vaIdx[i]=vcCtl.getItem(vaIdx[i]).label}return vaIdx}else{return vcCtl.getItem(pnIndex).label}}};SelectKit.prototype.getItemValue=function(app,psCtlId,pnIndex){var vcCtl=app.lookup(psCtlId);if(ValueUtil.isNull(pnIndex)){var item=vcCtl.getSelectionFirst();return item?item.value:""}else{if(vcCtl.multiple){var vaIdx=ValueUtil.split(pnIndex,",");for(var i=0,len=vaIdx.length;i<len;i++){vaIdx[i]=vcCtl.getItem(vaIdx[i]).value}return vaIdx}else{return vcCtl.getItem(pnIndex).value}}};SelectKit.prototype.getSelectedIndex=function(app,psCtlId){var vcCtl=app.lookup(psCtlId);var vaItems=vcCtl.getSelection();if(vcCtl.multiple){var vaIndices=new Array();for(var i=0,len=vaItems.length;i<len;i++){vaIndices.push(vcCtl.getIndex(vaItems[i]))}return vaIndices}else{return vcCtl.getIndex(vaItems[0])}};SelectKit.prototype.selectItem=function(app,psCtlId,puRowIdx,emitEvent){var vcCtl=app.lookup(psCtlId);if(vcCtl==null||vcCtl==undefined){return false}if(emitEvent==null||emitEvent==undefined){emitEvent=true}puRowIdx=ValueUtil.split(puRowIdx,",");if(vcCtl.multiple){if(puRowIdx.length>0){if(!ValueUtil.isNumber(puRowIdx[0])){for(var i=0,len=puRowIdx.length;i<len;i++){puRowIdx[i]=vcCtl.getIndexByValue(puRowIdx[i])}}vcCtl.selectItems(puRowIdx,emitEvent)}}else{if(puRowIdx.length>0){if(!ValueUtil.isNumber(puRowIdx[0])){var item=vcCtl.getItemByValue(puRowIdx[0]);if(item){vcCtl.selectItemByValue(puRowIdx[0],emitEvent)}else{vcCtl.selectItem(0,emitEvent)}}else{if(Number(puRowIdx[0])>=vcCtl.getItemCount()){vcCtl.selectItem(0,emitEvent)}else{vcCtl.selectItem(puRowIdx[0],emitEvent)}}}}return true};SelectKit.prototype.selectAllItem=function(app,psCtlId){var vcCtl=app.lookup(psCtlId);var indices=new Array();for(var i=0,len=vcCtl.getItemCount();i<len;i++){indices.push(i)}vcCtl.selectItems(indices)};SelectKit.prototype.reset=function(app,psCtlId){var vcCtl=app.lookup(psCtlId);if(vcCtl.dataSet){vcCtl.dataSet.clear()}vcCtl.value=""};SelectKit.prototype.findValue=function(app,psCtlId,psColName,condition){var ctrl=app.lookup(psCtlId);
  if(ctrl.dataSet){var findRow=ctrl.dataSet.findFirstRow(condition);if(findRow){return findRow.getValue(psColName)}}};function TreeKit(appKit){this._appKit=appKit}TreeKit.prototype.init=function(app,paTreeId){if(!(paTreeId instanceof Array)){paTreeId=[paTreeId]}var _app=app;var _appKit=this._appKit;for(var i=0,len=paTreeId.length;i<len;i++){var vcTree=(paTreeId[i] instanceof cpr.controls.Tree)?paTreeId[i]:_app.lookup(paTreeId[i]);if(vcTree==null){continue}var vcDataSet=vcTree.dataSet;vcDataSet._treeId=vcTree.id;var vsDataBindCtxId=vcTree.userAttr("bindDataFormId");if(vcDataSet){if(vcDataSet.getColumn(this._appKit.DataSet._PARENT_REFKEY)==null){vcDataSet.addColumn(new cpr.data.header.DataHeader(this._appKit.DataSet._PARENT_REFKEY,"string"))}if(vcDataSet.getColumn(this._appKit.DataSet._REFKEY)==null){vcDataSet.addColumn(new cpr.data.header.DataHeader(this._appKit.DataSet._REFKEY,"string"))}if(vcDataSet.getColumn(this._appKit.DataSet._REF_DEL_FLG)==null){vcDataSet.addColumn(new cpr.data.header.DataHeader(this._appKit.DataSet._REF_DEL_FLG,"string"))}}if(vsDataBindCtxId!=null&&vsDataBindCtxId!=""){vcTree.addEventListener("selection-change",function(e){var tree=e.control;var voSelectedItem=e.newSelection[0];var itemIdx=tree.getIndex(voSelectedItem);var voContext=new cpr.bind.DataRowContext(vcDataSet,itemIdx);var freeformes=ValueUtil.split(vsDataBindCtxId,",");freeformes.forEach(function(formId){var vcGrp=_app.lookup(formId);vcGrp.setBindContext(voContext);vcGrp.redraw()})});var vaPkColumnNames=ValueUtil.split(vcDataSet.info,",");vaPkColumnNames.some(function(value,idx){if(value==""){return false}if(!ValueUtil.isNull(vsDataBindCtxId)){var freeformes=ValueUtil.split(vsDataBindCtxId,",");freeformes.forEach(function(formId){var freeform=_app.lookup(formId);var vaChildCtrls=freeform.getChildren();vaChildCtrls.some(function(ctrl,idx){if(ctrl.type=="output"){return false}if(ctrl.userAttr("ignorePk")=="Y"){return false}var bind=ctrl.getBindInfo("value");if(bind&&bind.type=="datacolumn"&&value==bind.columnName){ctrl.bind("enabled").toExpression("getStateString() == 'I' ? true : false");ctrl.userAttr("required","Y");ctrl.style.setClasses("require")}})})}});vcDataSet.addEventListener("update",function(e){var dataset=e.control;var rowIndex=e.row.getIndex();var vaPkColumns=ValueUtil.split(dataset.info,",");if(vaPkColumns.length<1){dataset._findTreeCondition=null}else{var vaTempCond=[];vaPkColumns.forEach(function(column){vaTempCond.push(dataset.getValue(rowIndex,column))});if(vaTempCond.length>0){dataset._findTreeCondition=vaTempCond.join("")}else{dataset._findTreeCondition=null}}});vcDataSet.addEventListener("load",function(e){var dataset=e.control;var tree=_app.lookup(dataset._treeId);if(tree==null){return}if(dataset.getSort()!=""){dataset.clearSort()}if(dataset.getRowCount()>0){if(dataset._findTreeCondition){var voRow=dataset.findFirstRow(tree.itemSetConfig.value+"=='"+dataset._findTreeCondition+"'");var vnIdx=voRow.getIndex();tree.selectItem(vnIdx);tree.focusItem(tree.getItem(vnIdx))
}else{tree.selectItem(0,true)}}dataset._findTreeCondition=null})}}};TreeKit.prototype.getSelectedValue=function(app,psTreeId,psDiv){var vcTree=app.lookup(psTreeId);var vaItem=vcTree.getSelection();if(vaItem.length<1){return""}psDiv=(psDiv!=null?psDiv.toUpperCase():"VALUE");if(vcTree.multiple){var vaValues=new Array();vaItem.forEach(function(vcItem){if(psDiv=="LABEL"){vaValues.push(vcItem.label)}else{vaValues.push(vcItem.value)}});return vaValues}else{return psDiv=="LABEL"?vaItem[0].label:vaItem[0].value}};TreeKit.prototype.expandParentItem=function(app,psTreeId,poItem,pbHierarchy){var vcTree=app.lookup(psTreeId);var vaParentItem=new Array();pbHierarchy==!!pbHierarchy?pbHierarchy:true;function checkExpandItem(poPItem){var item=vcTree.getItemByValue(poPItem.parentValue);if(item!=null&&item.value!=""&&!vcTree.isExpanded(item)){vaParentItem.push(item);checkExpandItem(item)}}if(pbHierarchy){checkExpandItem(poItem)}else{vaParentItem.push(poItem)}for(var i=0,len=vaParentItem.length;i<len;i++){vcTree.expandItem(vaParentItem[i])}};TreeKit.prototype.selectBeforeRow=function(app,event,emitEvent){var vcTree=event.control;var emit=emitEvent===true?true:false;var voOldSelection=event.oldSelection[0];var vsOldVal=voOldSelection.value;vcTree.selectItemByValue(vsOldVal,emit);vcTree.focusItem(voOldSelection)};function TabKit(appKit){this._appKit=appKit}TabKit.prototype.getSelectedId=function(app,psTabId){var vcTab=app.lookup(psTabId);var vcTabItem=vcTab.getSelectedTabItem();return vcTabItem?vcTabItem.id:""};TabKit.prototype.setSelectedTabItemById=function(app,psTabId,pnIndex,emitEvent){var vcTab=app.lookup(psTabId);var vaTabItem=vcTab.getTabItems();var vcTabItem=vaTabItem.filter(function(item){return item.id==pnIndex});var emit=emitEvent!=undefined?emitEvent:true;vcTab.setSelectedTabItem(vcTabItem[0],emit)};TabKit.prototype.setVisibleTabItem=function(app,psTabId,pnIndex,pbVisible){var vcTab=app.lookup(psTabId);var vaTabItem=vcTab.getTabItems();var vcTabItem=vaTabItem.filter(function(item){return item.id==pnIndex});if(vcTabItem){vcTabItem[0].visible=pbVisible}};TabKit.prototype.setEnableTabItem=function(app,psTabId,paIndex,psEnable){var vcTab=app.lookup(psTabId);if(!(paIndex instanceof Array)){paIndex=[paIndex]}var vaTabItem=vcTab.getTabItems();for(var i=0,len=paIndex.length;i<len;i++){var vnTabIdx=paIndex[i]-1;vaTabItem[vnTabIdx].enabled=psEnable}};function EmbeddedAppKit(appKit){this._appKit=appKit}EmbeddedAppKit.prototype.callAppMethod=function(app,psEmbeddedappId,psFuncName,paArgs){var vcEmbed=app.lookup(psEmbeddedappId);var vsValue=null;if(vcEmbed){vcEmbed.ready(function(e){vsValue=e.callAppMethod(psFuncName,paArgs)})}return vsValue};function MDIKit(appKit){this._appKit=appKit}MDIKit.prototype.open=function(app,psMenuId){app.getRootAppInstance().callAppMethod("doOpenMenuToMdi",psMenuId)};MDIKit.prototype.close=function(app){if(app.targetScreen.name=="mobile"||app.targetScreen.name=="tablet"){if(app.getRootAppInstance().hasAppMethod("doOpenBoardNotice")){app.getRootAppInstance().callAppMethod("doOpenBoardNotice")
}}var vsMenuId=this._appKit.Auth.getMenuInfo(app,"MENU_CD");app.getRootAppInstance().callAppMethod("doCloseMdiTab",vsMenuId)};MDIKit.prototype.reload=function(app){app.getRootAppInstance().callAppMethod("doReloadMdiTab")};function ControlKit(appKit){this._appKit=appKit}ControlKit.prototype.setVisible=function(app,pbVisible,paCtlId){if(!(paCtlId instanceof Array)){paCtlId=[paCtlId]}if(typeof(pbVisible)!="boolean"){pbVisible=ValueUtil.fixBoolean(pbVisible)}for(var i=0,len=paCtlId.length;i<len;i++){app.lookup(paCtlId[i]).visible=pbVisible}};ControlKit.prototype.setEnable=function(app,pbEnable,paCtlId){if(!(paCtlId instanceof Array)){paCtlId=[paCtlId]}if(typeof(pbEnable)!="boolean"){pbEnable=ValueUtil.fixBoolean(pbEnable)}var ctrl;for(var i=0,len=paCtlId.length;i<len;i++){ctrl=app.lookup(paCtlId[i]);if(ctrl){ctrl.enabled=pbEnable}}};ControlKit.prototype.setReadOnly=function(app,pbReadOnly,paCtlId){if(!(paCtlId instanceof Array)){paCtlId=[paCtlId]}for(var i=0,len=paCtlId.length;i<len;i++){var voCtl=app.lookup(paCtlId[i]);if(voCtl==null||"undefined"==voCtl){continue}var vsCtlType=voCtl.type;if(voCtl.readOnly!==undefined){voCtl.readOnly=pbReadOnly}else{this.setEnable(app,!pbReadOnly,paCtlId[i])}}};ControlKit.prototype.getUserAttr=function(app,psCtlId,psAttrName){return app.lookup(psCtlId).userAttr(psAttrName)};ControlKit.prototype.setUserAttr=function(app,psCtlId,psAttrName,psAttrValue){var ctrl=app.lookup(psCtlId);var userAttr=ctrl.userAttr();userAttr[psAttrName]=psAttrValue};ControlKit.prototype.setFocus=function(app,psCtlId){var ctrl=app.lookup(psCtlId);if(ctrl instanceof cpr.controls.UDCBase){var focused=false;var embApp=ctrl.getEmbeddedAppInstance();embApp.getContainer().getChildren().some(function(embCtrl){if(embCtrl.getBindInfo("value")&&embCtrl.getBindInfo("value").property=="value"){embCtrl.focus();focused=true;return true}});if(focused!==true){app.focus(ctrl)}}else{app.focus(ctrl)}};ControlKit.prototype.reset=function(app,paCtlId){if(!(paCtlId instanceof Array)){paCtlId=[paCtlId]}var vcCtrl;for(var i=0,len=paCtlId.length;i<len;i++){vcCtrl=app.lookup(paCtlId[i]);if(vcCtrl==null){continue}if(vcCtrl.type=="grid"){vcCtrl.dataSet.clear();var titles=this._appKit.Group.getAllChildrenByType(app,"udc.com.comTitle");for(var j=0,jlen=titles.length;j<jlen;j++){if(titles[j]==null||titles[j].getAppProperty("ctrl")==null){continue}if(titles[j].getAppProperty("ctrl").id==vcCtrl.id){titles[j].setAppProperty("rowCount",vcCtrl.dataSet.getRowCount())}}}else{if(vcCtrl.type=="container"){var voDs=this._appKit.Group.getBindDataSet(app,vcCtrl);if(voDs){voDs.clear()}vcCtrl.redraw()}else{vcCtrl.value=""}}}};ControlKit.prototype.redraw=function(app,paCtlId){if(!(paCtlId instanceof Array)){paCtlId=[paCtlId]}for(var i=0,len=paCtlId.length;i<len;i++){var vcCtrl=app.lookup(paCtlId[i]);if(vcCtrl){vcCtrl.redraw()}}};ControlKit.prototype.getStyleAttr=function(app,psCtlId,psAttrName){var vcCtrl=app.lookup(psCtlId);return vcCtrl.style.css(psAttrName)};ControlKit.prototype.setStyleAttr=function(app,psCtlId,psAttrName,psAttrValue){var vcCtrl=app.lookup(psCtlId);
  return vcCtrl.style.css(psAttrName,psAttrValue)};ControlKit.prototype.getActualRectPosition=function(app,psCtlId,psPosition){var vcCtrl=app.lookup(psCtlId);var voActRec=vcCtrl.getActualRect();return voActRec[psType]};ControlKit.prototype.getConsraint=function(app,psCtlId,psParentGrp){var vcCtrl=app.lookup(psCtlId);var voContainer;if(!ValueUtil.isNull(psParentGrp)){voContainer=app.lookup(psParentGrp)}else{voContainer=app.getContainer()}var vcChild=app.lookup(psCtlId);return voContainer.getConstraint(vcChild)};ControlKit.prototype.updateConstraint=function(app,psCtlId,psParentGrpId,poConstraint){var vcChild=app.lookup(psCtlId);if(vcChild==null){return false}var voContainer=null;if(!ValueUtil.isNull(psParentGrpId)){voContainer=app.lookup(psParentGrpId)}else{voContainer=app.getContainer()}var voLayout=voContainer.getLayout();var voConstraint=null;if(voLayout instanceof cpr.controls.layouts.ResponsiveXYLayout){var voSrcConstraint=voContainer.getConstraint(vcChild)["positions"][0];voConstraint={positions:[Object.assign(voSrcConstraint,poConstraint)]}}else{voConstraint=poConstraint}return voContainer.updateConstraint(vcChild,voConstraint)};ControlKit.prototype.dispatchEvent=function(app,psCtlId,psEventType){var vcCtrl=app.lookup(psCtlId);if(vcCtrl){vcCtrl.dispatchEvent(new cpr.events.CEvent(psEventType))}};ControlKit.prototype.syncDataSet=function(app,hostApp,paCtlId){if(!(paCtlId instanceof Array)){paCtlId=[paCtlId]}var vcCtrl;for(var i=0,len=paCtlId.length;i<len;i++){vcCtrl=app.lookup(paCtlId[i]);if(vcCtrl==null){continue}if(vcCtrl.type=="grid"){var voConfig=vcCtrl.getInitConfig();voConfig.dataSet=hostApp.lookup(voConfig.dataSet.id);vcCtrl.init(voConfig);this._appKit.Grid.init(app,paCtlId[i])}else{if(vcCtrl.type=="container"&&vcCtrl.style&&vcCtrl.style.getClasses().indexOf("form-box")!=-1){var vaChildCtrls=vcCtrl.getChildren();vaChildCtrls.some(function(ctrl,idx){if(ctrl.type=="output"){return false}if(ctrl.type.startsWith("udc")){var data=ctrl.getAllAppProperties();for(var key in data){var bind=ctrl.getBindInfo(key);if(!bind||!bind.type||!(bind.type=="dataset"||bind.type=="datamap")||ValueUtil.isNull(bind.srcId)||ValueUtil.isNull(bind.columnName)){continue}if(bind.type=="datamap"){if(!hostApp.lookup(bind.srcId).isExistColumn(bind.columnName)){continue}ctrl.bind(key).toDataMap(hostApp.lookup(bind.srcId),bind.columnName)}else{if(bind.type=="dataset"&&!ValueUtil.isNull(bind.rowIndex)){if(!hostApp.lookup(bind.srcId).isExistColumn(bind.columnName)){continue}ctrl.bind(key).toDataSet(hostApp.lookup(bind.srcId),bind.columnName,bind.rowIndex)}}}}else{var bind=ctrl.getBindInfo("value");if(!bind||!(bind.type=="dataset"||bind.type=="datamap")||ValueUtil.isNull(bind.srcId)||ValueUtil.isNull(bind.columnName)){return}if(bind.type=="datamap"){if(!hostApp.lookup(bind.srcId).isExistColumn(bind.columnName)){return}ctrl.bind("value").toDataMap(hostApp.lookup(bind.srcId),bind.columnName)}else{if(bind.type=="dataset"&&!ValueUtil.isNull(bind.rowIndex)){if(!hostApp.lookup(bind.srcId).isExistColumn(bind.columnName)){return
}ctrl.bind("value").toDataSet(hostApp.lookup(bind.srcId),bind.columnName,bind.rowIndex)}}if(ctrl.type=="combobox"){ctrl.setItemSet(hostApp.lookup(ctrl.dataSet.id),{label:ctrl.itemSetConfig.label,value:ctrl.itemSetConfig.value})}}})}else{var bind=vcCtrl.getBindInfo("value");if(!bind||!(bind.type=="dataset"||bind.type=="datamap")||ValueUtil.isNull(bind.srcId)||ValueUtil.isNull(bind.columnName)){continue}if(bind.type=="datamap"){if(!hostApp.lookup(bind.srcId).isExistColumn(bind.columnName)){continue}vcCtrl.bind("value").toDataMap(hostApp.lookup(bind.srcId),bind.columnName)}else{if(bind.type=="dataset"&&!ValueUtil.isNull(bind.rowIndex)){if(!hostApp.lookup(bind.srcId).isExistColumn(bind.columnName)){continue}vcCtrl.bind("value").toDataSet(hostApp.lookup(bind.srcId),bind.columnName,bind.rowIndex)}}if(vcCtrl.type=="combobox"){vcCtrl.setItemSet(hostApp.lookup(vcCtrl.dataSet.id),{label:vcCtrl.itemSetConfig.label,value:vcCtrl.itemSetConfig.value})}}}}};function DataSetKit(appKit){this._appKit=appKit;this._PARENT_REFKEY="EX6_P_REF_KEY_";this._REFKEY="EX6_REF_KEY_";this._REF_DEL_FLG="EX6_P_REF_DEL_"}DataSetKit.prototype.addColumn=function(app,psDataSetId,psColumnNm,psValue,psColumnType){var dataset=app.lookup(psDataSetId);var columnType=!ValueUtil.isNull(psColumnType)?psColumnType.toLowerCase():"string";return dataset.addColumn(new cpr.data.header.DataHeader(psColumnNm,columnType),psValue)};DataSetKit.prototype.getValue=function(app,psDataSetId,psCondition,psColumnName){var dataset=app.lookup(psDataSetId);var voRow=dataset.findFirstRow(psCondition);return voRow!=null?voRow.getValue(psColumnName):""};DataSetKit.prototype.updateAllDeleteFlagForRefKey=function(app,psCtrlId,psRefKey){var ctrl=this._appKit.Group.getControlByID(app,psCtrlId);if(ctrl.length<1||ValueUtil.isNull(psRefKey)){return}ctrl=ctrl[0];var _this=this;var dataset=null;if(ctrl instanceof cpr.controls.Grid){dataset=ctrl.dataSet}else{var bindContext=this._appKit.Group.getBindContext(app,ctrl);dataset=bindContext.grid?bindContext.grid.dataSet:bindContext.dataSet}var vaAllRows=dataset.findAllRow(this._PARENT_REFKEY+" == '"+psRefKey+"'");if(vaAllRows!=null){vaAllRows.forEach(function(row){if(row.getState()==cpr.data.tabledata.RowState.UNCHANGED){row.setValue(_this._REF_DEL_FLG,"Y");row.setState(cpr.data.tabledata.RowState.UNCHANGED)}else{row.setValue(_this._REF_DEL_FLG,"Y")}})}};function GridKit(appKit){this._appKit=appKit}GridKit.prototype.init=function(app,paGridId){if(!(paGridId instanceof Array)){paGridId=[paGridId]}function getIndexDetailColumn(poGrid){var detail=poGrid.detail;var column;for(var i=0,len=detail.cellCount;i<len;i++){column=detail.getColumn(i);if(column.columnType=="rowindex"){return column}}return null}var _app=app;var _appKit=this._appKit;for(var i=0,len=paGridId.length;i<len;i++){var vcGrid=(paGridId[i] instanceof cpr.controls.Grid)?paGridId[i]:_app.lookup(paGridId[i]);if(vcGrid==null){continue}var columnMoveableYn=ValueUtil.fixNull(vcGrid.userAttr("columnMoveFix"));var columnResiableYn=ValueUtil.fixNull(vcGrid.userAttr("columnResizeFix"));
  var columnSortableYn=ValueUtil.fixNull(vcGrid.userAttr("columnSortFix"));var clickModeFixYn=ValueUtil.fixNull(vcGrid.userAttr("clickModeFix"));if(columnMoveableYn=="Y"){vcGrid.columnMovable=false}else{vcGrid.columnMovable=true}if(columnResiableYn=="Y"){vcGrid.columnResizable=false}else{vcGrid.columnResizable=true}if(clickModeFixYn!="Y"){vcGrid.clickMode="edit"}vcGrid._origin_autoFit=vcGrid.autoFit;var vcDataSet=vcGrid.dataSet;vcDataSet._gridId=vcGrid.id;var statusColumn=this.getHeaderStatusColumn(app,vcGrid.id);if(statusColumn!=null){var detailColumn=vcGrid.detail.getColumn(statusColumn.colIndex);var statusColumnCtrl=detailColumn?detailColumn.control:null;if(statusColumnCtrl){statusColumnCtrl.bind("value").toExpression("switch(getStateString()){ case 'I' : 'N'  case 'U' : 'U'  case 'D' : 'D'  default : ''}");statusColumnCtrl.style.css({"text-align":"center"})}}var indexColumn=getIndexDetailColumn(vcGrid);if(indexColumn!=null){indexColumn.style.css({"text-align":"center"});var hIndexColumn=vcGrid.header.getColumn(indexColumn.colIndex);if(hIndexColumn&&hIndexColumn.text!="No"){hIndexColumn.text="No"}}if(columnSortableYn!="Y"){var dColumn,hColumn,vaHColumns;var vsFixColSort="";for(var j=0,jlen=vcGrid.detail.cellCount;j<jlen;j++){dColumn=vcGrid.detail.getColumn(j);if(dColumn.columnType=="checkbox"||dColumn.columnType=="rowindex"){continue}if(dColumn.columnName==null||dColumn.columnName==""){continue}vsFixColSort=dColumn.control?dColumn.control.userAttr("columnSortFix"):"";vaHColumns=vcGrid.header.getColumnByColIndex(dColumn.colIndex,dColumn.colSpan);if(vaHColumns){vaHColumns.forEach(function(column){if(vsFixColSort!=="Y"){column.sortable=true}if(column.targetColumnName==null||column.targetColumnName==""){column.targetColumnName=dColumn.columnName}})}}}var vbGReadOnly=vcGrid.readOnly===true?true:false;var readHTextClass="readonly";var readHColor="#000000";if(vbGReadOnly){vcGrid.style.header.css({color:readHColor,"font-weight":"normal"})}else{var vaHeaderColumn=null;for(var k=0,klen=vcGrid.detail.cellCount;k<klen;k++){var dColumn=vcGrid.detail.getColumn(k);if(dColumn.columnType=="rowindex"){vaHeaderColumn=vcGrid.header.getColumnByColIndex(dColumn.colIndex,dColumn.colSpan);vaHeaderColumn.forEach(function(column){column.style.addClass(readHTextClass)})}else{if(dColumn.control==null||dColumn.controlType=="output"||dColumn.controlType=="image"||dColumn.controlType=="button"){vaHeaderColumn=this.getHeaderColumnByColIdex(app,vcGrid.id,dColumn.colIndex);vaHeaderColumn.forEach(function(column){column.style.addClass(readHTextClass)})}else{if(dColumn.control.enabled===false||dColumn.control.readOnly===true){var vbControlEnabled=ValueUtil.fixNull(dColumn.control.getBindInfo("enabled"))==""?dColumn.control.enabled:true;var vbColtrolReadonly=ValueUtil.fixNull(dColumn.control.getBindInfo("readOnly"))==""?dColumn.control.readOnly:false;vaHeaderColumn=this.getHeaderColumnByColIdex(app,vcGrid.id,dColumn.colIndex);vaHeaderColumn.forEach(function(column){if(column.style.getClasses().indexOf("require")==-1&&(vbControlEnabled===false||vbColtrolReadonly===true)){column.style.addClass(readHTextClass)
  }})}}}}}var vsHidenColumnIdxs="";for(var k=0,klen=vcGrid.header.cellCount;k<klen;k++){if(vcGrid.header.getColumn(k).visible===false){vsHidenColumnIdxs+=k+","}}vcGrid.userAttr("originHiddenColumns",vsHidenColumnIdxs);var vaPkColumnNames=ValueUtil.split(vcDataSet.info,",");var vsDataBindCtxId=vcGrid.userAttr("bindDataFormId");vaPkColumnNames.some(function(value,idx){if(value==""){return false}var columns=vcGrid.detail.getColumnByName(value);if(columns!=null&&columns.length>0){columns.forEach(function(col){if(col.control){col.control.bind("enabled").toExpression("getStateString() == 'I' ? true : false");col.control.userAttr("required","Y")}})}if(!ValueUtil.isNull(vsDataBindCtxId)){var freeformes=ValueUtil.split(vsDataBindCtxId,",");freeformes.forEach(function(formId){var freeform=_app.lookup(formId);if(freeform!=null){var vaChildCtrls=freeform.getChildren();vaChildCtrls.some(function(ctrl,idx){if(ctrl.type=="output"){return false}if(ctrl.userAttr("ignorePk")=="Y"){return false}var bind=ctrl.getBindInfo("value");if(bind&&bind.type=="datacolumn"&&value==bind.columnName){ctrl.bind("enabled").toExpression("getStateString() == 'I' ? true : false");ctrl.userAttr("required","Y")}})}})}});if(vcDataSet.getColumn(this._appKit.DataSet._PARENT_REFKEY)==null){vcDataSet.addColumn(new cpr.data.header.DataHeader(this._appKit.DataSet._PARENT_REFKEY,"string"))}if(vcDataSet.getColumn(this._appKit.DataSet._REFKEY)==null){vcDataSet.addColumn(new cpr.data.header.DataHeader(this._appKit.DataSet._REFKEY,"string"))}if(vcDataSet.getColumn(this._appKit.DataSet._REF_DEL_FLG)==null){vcDataSet.addColumn(new cpr.data.header.DataHeader(this._appKit.DataSet._REF_DEL_FLG,"string"))}if(!ValueUtil.isNull(vcGrid.userAttr("masterCtrlId"))){var vaMstGrid=_appKit.Group.getControlByID(vcGrid.getAppInstance(),vcGrid.userAttr("masterCtrlId"));vcDataSet._masterDataSet=vaMstGrid&&vaMstGrid.length>0?vaMstGrid[0].dataSet:null}vcDataSet.addEventListener("update",function(e){var dataset=e.control;var rowIndex=e.row.getIndex();var vaPkColumns=ValueUtil.split(dataset.info,",");if(vaPkColumns.length<1){dataset._findRowCondition=null;dataset._editColumn=null}else{var vaTempCond=[];vaPkColumns.forEach(function(column){vaTempCond.push(column+"=='"+dataset.getValue(rowIndex,column)+"'")});dataset._findRowCondition=vaTempCond.length>0?vaTempCond.join(" && "):null;dataset._editColumn=vaTempCond.length>0?e.columnName:null}if(vcDataSet._masterDataSet!=null){var vaMstPkColumns=ValueUtil.split(vcDataSet._masterDataSet.info,",");if(vaMstPkColumns.length>0){var vaTempCond=[];vaMstPkColumns.forEach(function(column){vaTempCond.push(column+"=='"+dataset.getValue(rowIndex,column)+"'")});vcDataSet._masterDataSet._findRowCondition=vaTempCond.length>0?vaTempCond.join(" && "):null}}});if(!ValueUtil.isNull(vcGrid.userAttr("masterCtrlId"))){vcDataSet.addEventListener("delete",function(e){var dataset=e.control;var rowIndex=e.row.getIndex();if(vcDataSet._masterDataSet!=null){var vaMstPkColumns=ValueUtil.split(vcDataSet._masterDataSet.info,",");
    if(vaMstPkColumns.length>0){var vaTempCond=[];vaMstPkColumns.forEach(function(column){vaTempCond.push(column+"=='"+dataset.getValue(rowIndex,column)+"'")});vcDataSet._masterDataSet._findRowCondition=vaTempCond.length>0?vaTempCond.join(" && "):null}}})}vcDataSet.addEventListener("filter",function(e){var dataset=e.control;var grd=dataset.getAppInstance().lookup(dataset._gridId);if(grd==null){return}var titles=_appKit.Group.getAllChildrenByType(_app,"udc.com.comTitle");for(var i=0,len=titles.length;i<len;i++){if(titles[i]==null){continue}if(titles[i].getAppProperty("ctrl")==null){continue}if(titles[i].getAppProperty("ctrl").id==grd.id){titles[i].setAppProperty("rowCount",dataset.getRowCount());break}}if(e.control.getRowCount()<1&&!ValueUtil.isNull(grd.userAttr("detailCtrlIds"))){var detailCtrls=ValueUtil.fixNull(grd.userAttr("detailCtrlIds"));if(detailCtrls!=null){var vaDetailCtrls=ValueUtil.split(detailCtrls,",");for(var i=0,len=vaDetailCtrls.length;i<len;i++){_appKit.Grid.filterDetail(_app,grd.id,vaDetailCtrls[i],null)}}}});vcDataSet.addEventListener("load",function(e){var dataset=e.control;var grd=dataset.getAppInstance().lookup(dataset._gridId);if(grd==null){return}if(dataset.getSort()!=""){dataset.clearSort()}if(dataset.getRowCount()>0){if(dataset._findRowCondition){var row=dataset.findFirstRow(dataset._findRowCondition);var column=dataset._editColumn;if(row){var cellIdx=0;if(ValueUtil.fixNull(column)!=""){cellIdx=grd.getCellIndex(column)==-1?0:grd.getCellIndex(column)}grd.selectionUnit=="cell"?grd.focusCell(row.getIndex(),0):grd.focusCell(row.getIndex(),cellIdx)}else{grd.selectionUnit=="cell"?grd.focusCell(0,0):_appKit.Grid.selectRow(_app,grd.id,0)}}else{if(grd.selectionUnit=="cell"){grd.focusCell(0,0)}else{_appKit.Grid.selectRow(_app,grd.id,0)}}}else{if(!ValueUtil.isNull(grd.userAttr("detailCtrlIds"))){var detailCtrls=ValueUtil.fixNull(grd.userAttr("detailCtrlIds"));if(detailCtrls!=null){var vaDetailCtrls=ValueUtil.split(detailCtrls,",");for(var i=0,len=vaDetailCtrls.length;i<len;i++){_appKit.Grid.filterDetail(_app,grd.id,vaDetailCtrls[i],null)}}}}dataset._findRowCondition=null;var titles=_appKit.Group.getAllChildrenByType(_app,"udc.com.comTitle");for(var i=0,len=titles.length;i<len;i++){if(titles[i]==null){continue}if(titles[i].getAppProperty("ctrl")==null){continue}if(titles[i].getAppProperty("ctrl").id==grd.id){titles[i].setAppProperty("rowCount",dataset.getRowCount());break}}});vcGrid.addEventListener("selection-dispose",function(e){var oldSelection=e.oldSelection;if(oldSelection!=null&&oldSelection.length>0&&oldSelection[0]>-1&&oldSelection[0]<e.control.rowCount){e.control.selectRows(oldSelection[0])}});if(!ValueUtil.isNull(vcGrid.userAttr("detailCtrlIds"))){vcGrid.addEventListener("selection-change",function(e){var detailCtrls=ValueUtil.fixNull(e.control.userAttr("detailCtrlIds"));if(detailCtrls!=null){var vaDetailCtrls=ValueUtil.split(detailCtrls,",");for(var i=0,len=vaDetailCtrls.length;i<len;i++){_appKit.Grid.filterDetail(_app,e.control.id,vaDetailCtrls[i],e.newSelection[0])
  }}})}if(vcGrid.userAttr("enableCheckDuplicatePk")==="true"){var _this=this;vcGrid.addEventListener("update",function(e){var vaPkColumnNames=ValueUtil.split(e.control.dataSet.info,",");if(e.row.getState()==cpr.data.tabledata.RowState.INSERTED&&vaPkColumnNames.indexOf(e.columnName)!=-1&&e.newValue!=""){var pkValue="";var check=true;var codition="";vaPkColumnNames.some(function(columnName,idx){if(columnName==""){return false}var value=e.control.getCellValue(e.rowIndex,columnName);if(value==null||value==""){check=false;return false}if(codition==""){codition=columnName+"=='"+value+"'"}else{codition+="&&"+columnName+"=='"+value+"'"}});if(check){var vaRows=e.control.findAllRow(codition);if(vaRows!=null&&vaRows.length>1){var msgValue="";var vaChildCtrls=e.control.getChildren();vaPkColumnNames.some(function(columnName,idx){if(columnName==""){return false}var value=_this.getHeaderColumnText(app,e.control.id,columnName);if(!ValueUtil.isNull(value)){vaChildCtrls.some(function(ctrl,idx){if(!ValueUtil.isNull(ctrl.getBindInfo("value"))){if(ctrl.getBindInfo("value").columnName==columnName){if(ctrl instanceof cpr.controls.ComboBox||ctrl instanceof cpr.controls.CheckBox||ctrl instanceof cpr.controls.RadioButton){value=ctrl.getSelectionFirst().label}else{value=e.control.getCellValue(e.rowIndex,columnName)}if(msgValue==""){msgValue=ValueUtil.isNull(value)?"":value}else{msgValue+=ValueUtil.isNull(value)?"":", "+value}}}})}});var vnTargetRowIdx=0;for(var j=0,jlen=vaRows.length;j<jlen;j++){if(vaRows[j].getIndex()!=e.rowIndex){vnTargetRowIdx=vaRows[j].getIndex();e.control.setEditRowIndex(e.rowIndex,true);break}}_appKit.Msg.alert("WRN-M281",[msgValue,(vnTargetRowIdx+1)])}}}})}vcGrid.addEventListener("contextmenu",function(e){var targetGrid=e.control;e.preventDefault();var ctxMenu=targetGrid._contextMenu;if(ctxMenu==undefined||ctxMenu==null){ctxMenu=new cpr.controls.Menu();ctxMenu.addItem(new cpr.controls.TreeItem("李얘린","1","root"));ctxMenu.addItem(new cpr.controls.TreeItem("�뺣젹痍⑥냼","2","root"));ctxMenu.addItem(new cpr.controls.TreeItem("�꾪꽣","3","root"));ctxMenu.addItem(new cpr.controls.TreeItem("�꾪꽣痍⑥냼","4","root"));ctxMenu.addItem(new cpr.controls.TreeItem("而щ읆�④�","5","root"));targetGrid._contextMenu=ctxMenu;ctxMenu.addEventListener("item-click",function(e){var itemValue=e.item.value;if(itemValue=="1"){var initValue={grid:targetGrid};_appKit.Dialog.open(app,"app/com/comGridFind",500,135,function(e){},initValue)}else{if(itemValue=="2"){if(targetGrid){targetGrid.header.clearSort()}}else{if(itemValue=="3"){var column;for(var i=0,len=targetGrid.header.cellCount;i<len;i++){column=targetGrid.header.getColumn(i);if(column.targetColumnName!=""){column.filterable=true}}}else{if(itemValue=="4"){if(targetGrid){targetGrid.header.clearFilter();if(targetGrid.userAttr("masterCtrlId")!=""){_appKit.Grid.filterDetail(targetGrid.getAppInstance(),targetGrid.userAttr("masterCtrlId"),targetGrid.id)}var column;for(var i=0,len=targetGrid.header.cellCount;i<len;i++){column=targetGrid.header.getColumn(i);
    column.filterable=false}}}else{if(itemValue=="5"){var initValue={grid:targetGrid};_appKit.Dialog.open(app,"app/com/comGridColumns",400,300,function(e){},initValue)}}}}}ctxMenu.dispose();targetGrid._contextMenu=null});ctxMenu.addEventListenerOnce("blur",function(e){ctxMenu.dispose();targetGrid._contextMenu=null})}var rootContainer=null;var showConstraint={position:"absolute",width:"130px",height:"60px"};if(_appKit.Dialog.isPopup(targetGrid.getAppInstance())){rootContainer=targetGrid.getAppInstance().getContainer();if((e.clientX-rootContainer.getActualRect().left)<130){showConstraint.left=(e.clientX-rootContainer.getActualRect().left)+"px"}else{showConstraint.left=(e.clientX-(rootContainer.getActualRect().left+130))+"px"}if((e.clientY+140)>rootContainer.getActualRect().bottom){showConstraint.top=(e.clientY-(rootContainer.getActualRect().top+140))+"px"}else{showConstraint.top=(e.clientY-rootContainer.getActualRect().top)+"px"}rootContainer.floatControl(ctxMenu,showConstraint)}else{rootContainer=targetGrid.getAppInstance().getRootAppInstance().getContainer();if(e.clientX<130){showConstraint.left="0px"}else{showConstraint.left=(e.clientX-130)+"px"}if((e.clientY+140)>rootContainer.getActualRect().bottom){showConstraint.top=(e.clientY-140)+"px"}else{showConstraint.top=e.clientY+"px"}rootContainer.addChild(ctxMenu,showConstraint)}ctxMenu.focus()});vcGrid.noDataMessage="議고쉶�� �댁뿭�� �놁뒿�덈떎."}};GridKit.prototype.setCellValue=function(app,psGridId,psDataColmnId,psValue,pnRowIndex,pbEmitEvent){var vcGrid=app.lookup(psGridId);var rowIndex=pnRowIndex==null?this.getIndex(app,psGridId):pnRowIndex;vcGrid.setCellValue(rowIndex,psDataColmnId,psValue,pbEmitEvent)};GridKit.prototype.getCellValue=function(app,psGridId,psDataColmnId,pnRowIndex){var vcGrid=app.lookup(psGridId);var rowIndex=pnRowIndex==null?this.getIndex(app,psGridId):pnRowIndex;return vcGrid.getCellValue(rowIndex,psDataColmnId)};GridKit.prototype.sort=function(app,psGridId,psCondition){var vcGrid=app.lookup(psGridId);vcGrid.clearSort();vcGrid.sort(psCondition);vcGrid.redraw()};GridKit.prototype.filter=function(app,psGridId,psCondition){var vcGrid=app.lookup(psGridId);var vsFilter=vcGrid.getFilter();if(!ValueUtil.isNull(vsFilter)){vcGrid.clearFilter()}vcGrid.filter(psCondition)};GridKit.prototype.filterDetail=function(app,psGridId,psDetailId,pnRowIndex){var _appKit=this._appKit;var vcParentGrid=app.lookup(psGridId);var vcDetailGrid=this._appKit.Group.getControlByID(app,psDetailId);if(vcParentGrid==null||vcDetailGrid.length<1){return}vcDetailGrid=vcDetailGrid[0];var vsCondition="";var rowIndex=pnRowIndex==null?this.getIndex(app,psGridId):pnRowIndex;if(vcParentGrid.getRowState(rowIndex)==cpr.data.tabledata.RowState.INSERTED){var vsParentRefKey=ValueUtil.fixNull(vcParentGrid.dataSet.getValue(rowIndex,this._appKit.DataSet._REFKEY));if(vsParentRefKey!=""){vsCondition=this._appKit.DataSet._PARENT_REFKEY+" =='"+vsParentRefKey+"'"}}else{var vaPkColumnNames=ValueUtil.split(ValueUtil.fixNull(vcParentGrid.dataSet.info),",");
  var vaFilterColumnNames=ValueUtil.split(ValueUtil.fixNull(vcParentGrid.userAttr("detailFilterColumns")),",");if(vaFilterColumnNames!=null&&vaFilterColumnNames.length>0){if(vaPkColumnNames.length>0){vaPkColumnNames.some(function(columnName,idx){if(ValueUtil.isNull(columnName)){return false}var filterColumnName=columnName;for(var j=0,jlen=vaFilterColumnNames.length;j<jlen;j++){if(vaFilterColumnNames[j].indexOf(columnName+"->")!=-1){filterColumnName=vaFilterColumnNames[j].split("->")[1];break}}if(vsCondition==""){vsCondition+=filterColumnName+"=='"+vcParentGrid.getCellValue(rowIndex,columnName)+"'"}else{vsCondition+="&&"+filterColumnName+"=='"+vcParentGrid.getCellValue(rowIndex,columnName)+"'"}})}}else{if(vaPkColumnNames.length>0){vaPkColumnNames.some(function(columnName,idx){if(ValueUtil.isNull(columnName)){return false}if(vsCondition==""){vsCondition+=columnName+"=='"+vcParentGrid.getCellValue(rowIndex,columnName)+"'"}else{vsCondition+="&&"+columnName+"=='"+vcParentGrid.getCellValue(rowIndex,columnName)+"'"}})}}}vcDetailGrid.setFilter(vsCondition);if(vcDetailGrid.rowCount>0){vcDetailGrid.selectRows(0)}};GridKit.prototype.isModified=function(app,paGridId,psAftMsg,event,poCallBackFunc){if(event!=null&&event.control!=null&&event.control.userAttr("selectionChangeByValidation")==="true"){event.control.removeUserAttr("selectionChangeByValidation");return false}if(!(paGridId instanceof Array)){paGridId=[paGridId]}psAftMsg=psAftMsg==null?"":psAftMsg;var modify=false;var vcGrid=null;for(var i=0,len=paGridId.length;i<len;i++){if(paGridId[i] instanceof cpr.controls.Grid){vcGrid=paGridId[i]}else{vcGrid=app.lookup(paGridId[i])}if(vcGrid.userAttr("ignoreModify")==="Y"){continue}if(vcGrid.dataSet==null){continue}if(vcGrid.dataSet.isModified()){modify=true;break}}if(modify){if(psAftMsg.toUpperCase()=="CRM"){if(!this._appKit.Msg.confirm("CRM-M003",[vcGrid.fieldLabel])){return true}else{return false}}}else{if(psAftMsg.toUpperCase()=="MSG"){this._appKit.Msg.notify(app,"INF-M006")}}return modify};GridKit.prototype.getCheckOrSelectedRowIndex=function(app,psGridId){var vcGrid=app.lookup(psGridId);if(vcGrid.rowCount<1){return[]}var vaChkIndexs=vcGrid.getCheckRowIndices();if(vaChkIndexs!=null&&vaChkIndexs.length>0){return vaChkIndexs}else{if(vcGrid.selectionUnit=="cell"){var vaSelIndices=vcGrid.getSelectedIndices();var rowIndices=[];for(var i=0,len=vaSelIndices.length;i<len;i++){rowIndices.push(vaSelIndices[i].rowIndex)}return rowIndices}else{return vcGrid.getSelectedRowIndices()}}};GridKit.prototype.getCheckedRowIndex=function(app,psGridId){var vcGrid=app.lookup(psGridId);if(vcGrid.rowCount<1){return[]}var vaChkIndexs=vcGrid.getCheckRowIndices();if(vaChkIndexs!=null&&vaChkIndexs.length>0){return vaChkIndexs}else{return[]}};GridKit.prototype.revertRowData=function(app,psGridId,pnRowIndex){var vcGrid=app.lookup(psGridId);if(pnRowIndex==null){var vaSelectIdx=this.getCheckOrSelectedRowIndex(app,psGridId);if(vaSelectIdx.length<1){return false}var vcDataSet=vcGrid.dataSet;var rowIndex;
  for(var i=vaSelectIdx.length-1;i>=0;i--){rowIndex=vaSelectIdx[i];vcGrid.setCheckRowIndex(rowIndex,false);vcGrid.revertRowData(rowIndex);if(vcGrid.getRowState(rowIndex)==cpr.data.tabledata.RowState.INSERTED){if(rowIndex==vcGrid.getRowCount()){if(rowIndex==0){vcGrid.clearSelection()}else{this.selectRow(app,vcGrid.id,rowIndex-1)}}else{this.selectRow(app,vcGrid.id,rowIndex)}}}}else{vcGrid.revertRowData(pnRowIndex)}};GridKit.prototype.revertAllData=function(app,psGridId){var vcGrid=app.lookup(psGridId);vcGrid.revertData()};GridKit.prototype.copyRowToGroupForm=function(app,psGridId,psTargetForm,pnRowIdx){var vcGrid=app.lookup(psGridId);var rowIndex=pnRowIdx==null?this.getIndex(app,psGridId):pnRowIdx;var vcGrpFrm=app.lookup(psTargetForm);vcGrpFrm.getBindContext().rowIndex=rowIndex;vcGrpFrm.redraw()};GridKit.prototype.copyToGridData=function(app,psSrcGridId,psDesGridId,pnSrcRowIdx){var vcSrcGrid=app.lookup(psSrcGridId);var vcDesGrid=app.lookup(psDesGridId);var rowIndexs=pnSrcRowIdx==null?this.getCheckOrSelectedRowIndex(app,psSrcGridId):pnSrcRowIdx;if(!(rowIndexs instanceof Array)){rowIndexs=[rowIndexs]}if(rowIndexs.length<1){return}var srcDataSet=vcSrcGrid.dataSet;var tarDataSet=vcDesGrid.dataSet;for(var i=0,len=rowIndexs.length;i<len;i++){if(srcDataSet.getRowState(rowIndexs[i])==cpr.data.tabledata.RowState.INSERTDELETED){continue}var data=srcDataSet.getRowData(rowIndexs[i]);var str=[];for(var key in data){str.push(key+" == '"+data[key]+"'")}str=str.join(" && ");var findRow=tarDataSet.findAllRow(str);if(findRow==null||findRow.length<1){tarDataSet.addRowData(data)}}vcDesGrid.redraw()};GridKit.prototype.copyToAllGridData=function(app,psSrcGridId,psDesGridId){var vcSrcGrid=app.lookup(psSrcGridId);var indices=[];for(var i=0,len=vcSrcGrid.rowCount;i<len;i++){indices.push(i)}this.copyToGridData(app,psSrcGridId,psDesGridId,indices)};GridKit.prototype.markFindRowCondition=function(app,psGridId,pnRowIndex,pbForce){var vcGrid=app.lookup(psGridId);var voDataSet=vcGrid.dataSet;if(pbForce!=undefined&&ValueUtil.fixBoolean(pbForce)===true){if(!ValueUtil.isNull(voDataSet._findRowCondition)){return}}var rowIndex=!ValueUtil.isNull(pnRowIndex)?pnRowIndex:this.getIndex(app,psGridId);var vaTempCond=[];var vaPkColumns=ValueUtil.split(voDataSet.info,",");vaPkColumns.forEach(function(column){vaTempCond.push(column+"=='"+voDataSet.getValue(rowIndex,column)+"'")});if(vaTempCond.length>0){voDataSet._findRowCondition=vaTempCond.join(" && ")}else{voDataSet._findRowCondition=null}};GridKit.prototype.moveToGridData=function(app,psSrcGridId,psDesGridId,pnSrcRowIdx){var vcSrcGrid=app.lookup(psSrcGridId);var vcDesGrid=app.lookup(psDesGridId);var rowIndexs=pnSrcRowIdx==null?this.getCheckOrSelectedRowIndex(app,psSrcGridId):pnSrcRowIdx;if(!(rowIndexs instanceof Array)){rowIndexs=[rowIndexs]}if(rowIndexs.length<1){return}var srcDataSet=vcSrcGrid.dataSet;var tarDataSet=vcDesGrid.dataSet;for(var i=0,len=rowIndexs.length;i<len;i++){if(srcDataSet.getRowState(rowIndexs[i])==cpr.data.tabledata.RowState.INSERTDELETED){continue
}tarDataSet.addRowData(srcDataSet.getRowData(rowIndexs[i]))}vcDesGrid.redraw();vcSrcGrid.deleteRow(pnSrcRowIdx)};GridKit.prototype.moveToAllGridData=function(app,psSrcGridId,psDesGridId){var vcSrcGrid=app.lookup(psSrcGridId);var indices=[];for(var i=0,len=vcSrcGrid.rowCount;i<len;i++){indices.push(i)}this.moveToGridData(app,psSrcGridId,psDesGridId,indices)};GridKit.prototype.selectRow=function(app,psGridId,pnRowIndex){var vcGrid=app.lookup(psGridId);if(pnRowIndex==null||pnRowIndex==undefined){pnRowIndex=this.getIndex(app,psGridId)}vcGrid.selectRows(pnRowIndex);vcGrid.focusCell(pnRowIndex,0)};GridKit.prototype.selectRowByCondition=function(app,psGridId,psCondition,pnCellIdx){var vcGrid=app.lookup(psGridId);var voRow=vcGrid.findFirstRow(psCondition);if(voRow){if(pnCellIdx){vcGrid.focusCell(voRow.getIndex(),pnCellIdx)}else{vcGrid.selectRows(voRow.getIndex())}}};GridKit.prototype.selectBeforeRow=function(app,event,emitEvent){var vcGrid=event.control;var emit=emitEvent===true?true:false;var voOldSelection=event.oldSelection[0];var vsPkValues=this.getRowPKColumnValues(app,vcGrid.id,voOldSelection);var voFindRow=vcGrid.findFirstRow(vsPkValues);if(voFindRow){if(vcGrid.selectionUnit=="cell"){vcGrid.selectCells([{rowIndex:voFindRow.rowIndex,cellIndex:voFindRow.cellIndex}],emit)}else{vcGrid.selectRows(voFindRow.getIndex(),emit)}}};GridKit.prototype.insertRow=function(app,psGridId,pnEditCellIdx,pnRowIdx,poRowData){var vcGrid=app.lookup(psGridId);var rowIndex=pnRowIdx==null?this.getIndex(app,psGridId):pnRowIdx;var insertedRow=null;if(poRowData!=null){insertedRow=vcGrid.insertRowData(rowIndex,true,poRowData)}else{insertedRow=vcGrid.insertRow(rowIndex,true)}var vnInsIdx=insertedRow.getIndex();if(vcGrid.dataSet.getColumn(this._appKit.DataSet._REFKEY)){vcGrid.dataSet.setValue(vnInsIdx,this._appKit.DataSet._REFKEY,"REF_"+DateUtil.getCurrentTime())}if(vcGrid.readOnly){vcGrid.selectRows([vnInsIdx])}else{vcGrid.selectRows([vnInsIdx]);vcGrid.setEditRowIndex(vnInsIdx,true)}if(!ValueUtil.isNull(vcGrid.userAttr("masterCtrlId"))){var parentCtrl=this._appKit.Group.getControlByID(vcGrid.getAppInstance(),ValueUtil.trim(vcGrid.userAttr("masterCtrlId")));if(parentCtrl.length>0&&vcGrid.dataSet.getColumn(this._appKit.DataSet._PARENT_REFKEY)){parentCtrl=parentCtrl[0];var pRowIndex=-1;if(parentCtrl instanceof cpr.controls.Grid){pRowIndex=this._appKit.Grid.getIndex(parentCtrl.getAppInstance(),parentCtrl.id);vcGrid.dataSet.setValue(vnInsIdx,this._appKit.DataSet._PARENT_REFKEY,parentCtrl.dataSet.getValue(pRowIndex,this._appKit.DataSet._REFKEY))}else{var voBindContext=this._appKit.Group.getBindContext(parentCtrl.getAppInstance(),parentCtrl);var poDs=voBindContext.grid?voBindContext.grid.dataSet:voBindContext.dataSet;pRowIndex=voBindContext.grid?this._appKit.Grid.getIndex(parentCtrl.getAppInstance(),voBindContext.grid.id):voBindContext.rowIndex;vcGrid.dataSet.setValue(vnInsIdx,this._appKit.DataSet._PARENT_REFKEY,poDs.getValue(pRowIndex,this._appKit.DataSet._REFKEY))}}}if(pnEditCellIdx){vcGrid.focusCell(vnInsIdx,pnEditCellIdx);
  if(!ValueUtil.isNumber(pnEditCellIdx)){for(var i=0,len=vcGrid.detail.cellCount;i<len;i++){if(vcGrid.detail.getColumn(i).columnName==pnEditCellIdx){var ctrl=vcGrid.detail.getColumn(i).control;if(ctrl instanceof cpr.controls.UDCBase){var empApp=ctrl.getEmbeddedAppInstance();ctrl=AppUtil.getUDCBindValueControl(ctrl);if(ctrl){empApp.focus(ctrl.id)}}break}}}}if(!ValueUtil.isNull(vcGrid.userAttr("bindDataFormId"))){var freeformes=ValueUtil.split(vcGrid.userAttr("bindDataFormId"),",");freeformes.forEach(function(formId){var freeform=vcGrid.getAppInstance().lookup(formId);if(freeform!=null){if(freeform._expressEnabled){freeform.bind("enabled").toExpression(freeform._expressEnabled)}else{freeform.enabled=true}}})}return insertedRow};GridKit.prototype.insertRowOnlyOne=function(app,psGridId,pnEditCellIdx,paModifiedGrid,pnRowIdx,poRowData){var vcGrid=app.lookup(psGridId);if(vcGrid==null){return null}var rowIndex=pnRowIdx==null?this.getIndex(app,psGridId):pnRowIdx;var insertedRow=null;if(vcGrid.dataSet.getRowStatedCount(cpr.data.tabledata.RowState.INSERTED)>0){for(var i=0,len=vcGrid.rowCount;i<len;i++){if(vcGrid.getRowState(i)==cpr.data.tabledata.RowState.INSERTED){insertedRow=vcGrid.getRow(i);break}}}if(insertedRow){if(!this._appKit.Msg.confirm("CRM-M206",[vcGrid.fieldLabel])){return null}this._appKit.Control.reset(app,paModifiedGrid);var vaColumns=vcGrid.dataSet.getColumnNames();vaColumns.forEach(function(column){vcGrid.setCellValue(insertedRow.getIndex(),column,"",false)})}else{if(this.isModified(app,paModifiedGrid,"CRM")){return null}this._appKit.Control.reset(app,paModifiedGrid);insertedRow=vcGrid.insertRow(rowIndex,true)}var vnInsIdx=insertedRow.getIndex();if(vcGrid.readOnly){vcGrid.selectRows([vnInsIdx])}else{vcGrid.selectRows([vnInsIdx]);vcGrid.setEditRowIndex(vnInsIdx,true)}if(pnEditCellIdx){vcGrid.focusCell(vnInsIdx,pnEditCellIdx);if(!ValueUtil.isNumber(pnEditCellIdx)){for(var i=0,len=vcGrid.detail.cellCount;i<len;i++){if(vcGrid.detail.getColumn(i).columnName==pnEditCellIdx){var ctrl=vcGrid.detail.getColumn(i).control;if(ctrl instanceof cpr.controls.UDCBase){var empApp=ctrl.getEmbeddedAppInstance();ctrl=AppUtil.getUDCBindValueControl(ctrl);if(ctrl){empApp.focus(ctrl.id)}}break}}}}return insertedRow};GridKit.prototype.deleteRow=function(app,psGridId,pnRowIdx){var vcGrid=app.lookup(psGridId);var _this=this;var rowIndexs=pnRowIdx==null?this.getCheckOrSelectedRowIndex(app,psGridId):pnRowIdx;if(!(rowIndexs instanceof Array)){rowIndexs=[pnRowIdx]}if(rowIndexs.length<1){this._appKit.Msg.alert("INF-M007");return false}var vaDetailCtrls=null;if(vcGrid.userAttr("detailCtrlIds")!=""){vaDetailCtrls=ValueUtil.split(vcGrid.userAttr("detailCtrlIds"),",")}var vcDataSet=vcGrid.dataSet;for(var i=rowIndexs.length-1;i>=0;i--){var rowIdx=rowIndexs[i];vcGrid.deleteRow(rowIdx);if(vcDataSet!=null){if(vcDataSet.getRowState(rowIdx)==cpr.data.tabledata.RowState.INSERTDELETED){if(vaDetailCtrls!=null&&vaDetailCtrls.length>0){vaDetailCtrls.forEach(function(ctrlId){_this._appKit.DataSet.updateAllDeleteFlagForRefKey(app,ctrlId,vcDataSet.getValue(rowIdx,_this._appKit.DataSet._REFKEY))
})}vcGrid.revertRowData(rowIdx);if(rowIdx==vcGrid.getRowCount()){if(rowIdx==0){vcGrid.clearSelection()}else{vcGrid.selectRows(rowIdx-1)}}else{vcGrid.selectRows(rowIdx)}}}}if(!ValueUtil.isNull(vcGrid.userAttr("bindDataFormId"))){var freeformes=ValueUtil.split(vcGrid.userAttr("bindDataFormId"),",");freeformes.forEach(function(formId){var freeform=vcGrid.getAppInstance().lookup(formId);if(freeform!=null){var voDs=_this._appKit.Group.getBindDataSet(freeform.getAppInstance(),freeform);if(voDs.getRowCount()<1){freeform.enabled=false}}})}return rowIndexs};GridKit.prototype.getRowState=function(app,psGridId,pnRowIdx){var vcGrid=app.lookup(psGridId);var rowIndex=pnRowIdx==null?this.getIndex(app,psGridId):pnRowIdx;return vcGrid.getRowState(rowIndex)};GridKit.prototype.setRowState=function(app,psGridId,state,pnRowIdx){var vcGrid=app.lookup(psGridId);var rowIndex=pnRowIdx==null?this.getIndex(app,psGridId):pnRowIdx;vcGrid.setRowState(rowIndex,state)};GridKit.prototype.setRowStateAll=function(app,psGridId,state){var vcGrid=app.lookup(psGridId);var vcDataSet=vcGrid.dataSet;vcDataSet.setRowStateAll(state);vcGrid.redraw()};GridKit.prototype.getRowStatedIndices=function(app,psGridId,state){var vcGrid=app.lookup(psGridId);return vcGrid.dataSet.getRowStatedIndices(state)};GridKit.prototype.getIndex=function(app,psGridId){var vcGrid=app.lookup(psGridId);return vcGrid.selectionUnit!="cell"?vcGrid.getSelectedRowIndex():vcGrid.getSelectedIndices()[0]["rowIndex"]};GridKit.prototype.getHeaderColumn=function(app,psGridId,psColumnName){var vcGrid=app.lookup(psGridId);var vaDetailColumn=vcGrid.detail.getColumnByName(psColumnName);var vaHeaderColumns=new Array();vaDetailColumn.forEach(function(dColumn){var vaHeaderColumn=vcGrid.header.getColumnByColIndex(dColumn.colIndex,dColumn.colSpan);vaHeaderColumn.forEach(function(hColumn){vaHeaderColumns.push(hColumn)})});return vaHeaderColumns};GridKit.prototype.getHeaderColumnByColIdex=function(app,psGridId,pnColIndex){var vcGrid=app.lookup(psGridId);var voHeader=vcGrid.header;var vaHeaderColumns=new Array();var hColumn;for(var i=0,len=voHeader.cellCount;i<len;i++){hColumn=voHeader.getColumn(i);if(hColumn!=null&&hColumn.colIndex==pnColIndex){vaHeaderColumns.push(hColumn)}}return vaHeaderColumns};GridKit.prototype.getHeaderColumnText=function(app,psGridId,psColumnName){var vaColumns=this.getHeaderColumn(app,psGridId,psColumnName);return vaColumns.length>0?vaColumns[0].getText():""};GridKit.prototype.getHeaderStatusColumn=function(app,psGridId){var header=app.lookup(psGridId).header;var column=null;for(var i=0,len=header.cellCount;i<len;i++){column=header.getColumn(i);if(column.getText()=="F"){return column}}return null};GridKit.prototype.hideColumn=function(app,psGridId,psColumnName){var vcGrid=app.lookup(psGridId);var vaColumns=this.getHeaderColumn(app,psGridId,psColumnName);if(vaColumns.length>0){vcGrid.columnVisible(vaColumns[0].colIndex,false)}};GridKit.prototype.showColumn=function(app,psGridId,psColumnName){var vcGrid=app.lookup(psGridId);
  var vaColumns=this.getHeaderColumn(app,psGridId,psColumnName);if(vaColumns.length>0){vcGrid.columnVisible(vaColumns[0].colIndex,true)}};GridKit.prototype.setFindRowCondition=function(app,psGridId,psCondition){var vcGrid=app.lookup(psGridId);vcGrid.dataSet._findRowCondition=psCondition};GridKit.prototype.getRowPKColumnValues=function(app,psGridId,pnRowIndex){var vcGrid=app.lookup(psGridId);var vcDataSet=vcGrid.dataSet;var rowIndex=pnRowIndex==null?this.getIndex(app,psGridId):pnRowIndex;var vaPkColmns=ValueUtil.split(vcDataSet.info,",");var vaTempCond=[];vaPkColmns.forEach(function(column){var vsPkValue=vcDataSet.getValue(rowIndex,column);vaTempCond.push(column+"=='"+vcDataSet.getValue(rowIndex,column)+"'")});return vaTempCond.length>0?vaTempCond.join(" && "):""};GridKit.prototype.checkSelectionWithPkValues=function(app,psGridId,paIgnoreCol){var vcGrid=app.lookup(psGridId);var rowIndex=this.getIndex(app,vcGrid.id);if(rowIndex<0){this._appKit.Msg.alert("INF-M226",[vcGrid.fieldLabel]);return false}var vaPKColumns=ValueUtil.split(ValueUtil.fixNull(vcGrid.dataSet.info),",");var valid=true,text,focusColumn,vbChk=false;for(var i=0,len=vaPKColumns.length;i<len;i++){if(ValueUtil.isNull(vcGrid.getCellValue(rowIndex,vaPKColumns[i]))){if(!(paIgnoreCol instanceof Array)){paIgnoreCol=[paIgnoreCol]}vbChk=false;paIgnoreCol.some(function(colName){if(colName==vaPKColumns[i]){vbChk=true;return false}});if(vbChk){continue}valid=false;focusColumn=vaPKColumns[i];text=this.getHeaderColumnText(app,vcGrid.id,focusColumn);break}}if(!valid){this._appKit.Msg.alert("WRN-M001",[vcGrid.fieldLabel+"�� "+text]);vcGrid.setEditRowIndex(rowIndex,true);vcGrid.focusCell(rowIndex,focusColumn);var vaDetailColumns=vcGrid.detail.getColumnByName(focusColumn);var dctrl=vaDetailColumns!=null&&vaDetailColumns.length>0?vaDetailColumns[0].control:null;if(dctrl!=null&&dctrl instanceof cpr.controls.UDCBase){var empApp=dctrl.getEmbeddedAppInstance();dctrl=AppUtil.getUDCBindValueControl(dctrl);if(dctrl){empApp.focus(dctrl.id)}}return false}return true};GridKit.prototype.exportData=function(app,psGridId,psFileName,psExcludeColumns,psFileType,metadata,pbExcludeHideColumn,psExCludePart){var _this=this;var vcGrid=app.lookup(psGridId);var vsFileType=!ValueUtil.isNull(psFileType)?psFileType:"xlsx";pbExcludeHideColumn=ValueUtil.isNull(pbExcludeHideColumn)?true:pbExcludeHideColumn;var subExport=new cpr.protocols.Submission();subExport.action="../export/"+psFileName.replace("/","")+"."+vsFileType;subExport.mediaType="application/json";subExport.responseType="blob";var voMenuInfo=this._appKit.Auth.getMenuInfo(app);if(voMenuInfo!=null&&voMenuInfo.size()>0){var vsMenuKey=voMenuInfo.get("MENU_CD");subExport.addParameter("_AUTH_MENU_KEY",vsMenuKey)}var exportRowIndex=vcGrid.userAttr("exportRowIndex");exportRowIndex=exportRowIndex!=undefined&&exportRowIndex!=""?ValueUtil.fixBoolean(exportRowIndex):false;var voColumn,voHColumn;var vaExcludeCellIndexs=[];var vaHCellIndexs=null;for(var i=0,len=vcGrid.detail.cellCount;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            i<len;i++){voColumn=vcGrid.detail.getColumn(i);if(voColumn.columnType=="checkbox"){vaHCellIndexs=vcGrid.getHeaderCellIndices(voColumn.cellProp.constraint.cellIndex);if(vaHCellIndexs!=null&&vaHCellIndexs.length>0){vaExcludeCellIndexs.push(vaHCellIndexs[vaHCellIndexs.length-1])}else{vaExcludeCellIndexs.push(i)}}else{if(voColumn.control instanceof cpr.controls.UDCBase&&voColumn.control.getBindInfo("value")==null){vaHCellIndexs=vcGrid.getHeaderCellIndices(voColumn.cellProp.constraint.cellIndex);if(vaHCellIndexs!=null&&vaHCellIndexs.length>0){vaExcludeCellIndexs.push(vaHCellIndexs[vaHCellIndexs.length-1])}else{vaExcludeCellIndexs.push(i)}}else{if(pbExcludeHideColumn){vaHCellIndexs=vcGrid.getHeaderCellIndices(voColumn.cellProp.constraint.cellIndex);if(vaHCellIndexs!=null&&vaHCellIndexs.length>0){voHColumn=vcGrid.header.getColumn(vaHCellIndexs[vaHCellIndexs.length-1]);if(voHColumn.visible===false){vaExcludeCellIndexs.push(vaHCellIndexs[vaHCellIndexs.length-1])}}else{voHColumn=this.getHeaderColumn(app,psGridId,voColumn.columnName);if(voHColumn!=null&&voHColumn.length>0){if(voHColumn[0].visible===false){vaExcludeCellIndexs.push(i)}}}}}}}var statusColumn=this.getHeaderStatusColumn(app,vcGrid.id);if(statusColumn!=null){vaExcludeCellIndexs.push(statusColumn.colIndex)}if(!ValueUtil.isNull(psExcludeColumns)){var vaExclColumns=ValueUtil.split(psExcludeColumns,",");var vaDColumns;for(var j=0,jlen=vaExclColumns.length;j<jlen;j++){vaDColumns=vcGrid.detail.getColumnByName(vaExclColumns[j]);if(vaDColumns){vaDColumns.forEach(function(each){vaExcludeCellIndexs.push(each.colIndex)})}}}var exportData=vcGrid.getExportData({exceptStyle:false,freezeHeader:true,excludeCols:vaExcludeCellIndexs});var exportLogging=false;var exportIqyRsn="";if(metadata!=null){exportData.metadata={};if(metadata.password!=null){exportData.metadata["password"]=metadata.password}if(metadata.printPageOrientation!=null){exportData.metadata["printPageOrientation"]=metadata.printPageOrientation}if(metadata.exportLogging!=null){exportLogging=metadata.exportLogging}if(metadata.exportIqyRsn!=null){exportIqyRsn=metadata.exportIqyRsn}}if(!ValueUtil.isNull(psExCludePart)){var len=exportData.rowgroups.length;for(var i=(len-1);i>=0;i--){if(exportData.rowgroups[i].region==psExCludePart){exportData.rowgroups.splice(i,1)}}}for(var i=0,len=exportData.rowgroups.length;i<len;i++){var rowGroup=exportData.rowgroups[i];var cellLength=rowGroup.style.length;for(var j=0;j<cellLength;j++){rowGroup.style[j].style["border-bottom-color"]="black";rowGroup.style[j].style["border-bottom-style"]="solid";rowGroup.style[j].style["border-bottom-width"]="1px";rowGroup.style[j].style["border-left-color"]="black";rowGroup.style[j].style["border-left-style"]="solid";rowGroup.style[j].style["border-left-width"]="1px";rowGroup.style[j].style["border-right-color"]="black";rowGroup.style[j].style["border-right-style"]="solid";rowGroup.style[j].style["border-right-width"]="1px";rowGroup.style[j].style["border-top-color"]="black";rowGroup.style[j].style["border-top-style"]="solid";
  rowGroup.style[j].style["border-top-width"]="1px";if(rowGroup.region=="header"){if(ValueUtil.isNull(rowGroup.style[j].style["background-color"])){rowGroup.style[j].style["background-color"]="#dddddd"}rowGroup.style[j].style["text-align"]="center"}}}if(exportLogging){subExport.setParameters("exportLogging","Y");subExport.setParameters("exportRowCount",vcGrid.getRowCount());subExport.setParameters("exportIqyRsn",exportIqyRsn)}subExport.setRequestObject(exportData);var _app=app;this._appKit.showLoadMask(app);subExport.send();subExport.addEventListenerOnce("submit-done",function(e){try{_this._appKit.hideLoadMask(_app)}catch(ex){console.log(ex)}})};function SubmissionKit(appKit){this._appKit=appKit}SubmissionKit.prototype._onBeforeSubmit=function(e){var submit=e.control;var _app=submit.getAppInstance();submit.addParameter("Oe2Ue","#9e4ki");submit.addParameter("Le093","e&*\biu");submit.addParameter("AWeh_3","W^_zie");submit.addParameter("Hd,poi","_qw3e4");submit.addParameter("EKf8_/","Ajd%md");submit.addParameter("WEh3m","ekmf3");submit.addParameter("rE\fje","JDow871");submit.addParameter("JKGhe8","NuMoe6");submit.addParameter("_)e7me","ne+3|q");submit.addParameter("3kd3Nj","Qnd@%1");var voMenuInfo=this._appKit.Auth.getMenuInfo(_app);if(voMenuInfo!=null&&voMenuInfo.size()>0){var vsMenuKey=voMenuInfo.get("MENU_CD");submit.addParameter("_AUTH_MENU_KEY",vsMenuKey)}submit.setDataRowHandler(function(rowdata){var additionalValue={};if(rowdata.getState()==cpr.data.tabledata.RowState.INSERTED||cpr.data.tabledata.RowState.UPDATED||cpr.data.tabledata.RowState.DELETED){additionalValue.CRT_USER_ID="";additionalValue.CRT_PGM_ID="";additionalValue.CRT_IP_MAC="";additionalValue.UPD_USER_ID="";additionalValue.UPD_PGM_ID="";additionalValue.UPD_IP_MAC=""}var dsInfo=rowdata.getDataSetInfo();if(dsInfo&&(rowdata.getState()==cpr.data.tabledata.RowState.UPDATED||cpr.data.tabledata.RowState.DELETED)){var vaPks=dsInfo.split(",");vaPks.some(function(value,idx){value=value.replace(/(^\s*)|(\s*$)/g,"");if(value==""){return false}additionalValue[value+"__origin"]=rowdata.getOriginalValue(value)})}else{if(dsInfo&&(rowdata.getState()==cpr.data.tabledata.RowState.INSERTED)){var vaPks=dsInfo.split(",");vaPks.some(function(value,idx){value=value.replace(/(^\s*)|(\s*$)/g,"");if(value==""){return false}additionalValue[value+"__origin"]=rowdata.getValue(value)})}}return additionalValue})};SubmissionKit.prototype._onSubmitReceive=function(e,pbSuccess){var submission=e.control;var xhr=submission.xhr;var contentType=xhr.getResponseHeader("Content-Type");if(contentType==null){return true}contentType=contentType.toLowerCase();if(contentType.indexOf(";")>-1){contentType=contentType.substring(0,contentType.indexOf(";"))}contentType=ValueUtil.trim(contentType);if("application/json"!=contentType){return}var response=xhr.responseText;var jsonRes=JSON.parse(response);var errMsgInfo=jsonRes.ERRMSGINFO;if(errMsgInfo){var vsErrMsg="";try{vsErrMsg=eval('"'+errMsgInfo.ERRMSG+'"')}catch(e){vsErrMsg=errMsgInfo.ERRMSG.replace(/\r\n/ig,"\n")
}if("SYS.CMMN@CMMN018"==errMsgInfo.ERRCODE){alert(vsErrMsg.split(",")[0])}else{alert(vsErrMsg)}if("SYS.CMMN@CMMN004"==errMsgInfo.ERRCODE||"SYS.CMMN@CMMN017"==errMsgInfo.ERRCODE){top.location.href="/"}return false}return true};SubmissionKit.prototype._onSubmitSuccess=function(e,pbSuccess){return pbSuccess};SubmissionKit.prototype._onSubmitError=function(e){var submission=e.control;var _app=submission.getAppInstance();this._appKit.Msg.alert("ERR-SRV");var msg=submission.getMetadata("msg");if(msg){this._appKit.Msg.notify(_app,msg)}else{if(e.nativeEvent){this._appKit.Msg.notify(_app,"network : "+e.nativeEvent.type)}}return false};SubmissionKit.prototype._onSubmitDone=function(e,poCallbackFunc,pbSuccess,pbAppDisable){var submission=e.control;var _app=submission.getAppInstance();var vsFindRowKey=submission.getMetadata("strFindRowKey");if(!ValueUtil.isNull(vsFindRowKey)){var vnDsCnt=submission.getRequestDataCount();var voDs,vaFindKey;var vaFindRowKeys=ValueUtil.split(vsFindRowKey,"|");for(var i=0,len=vaFindRowKeys.length;i<len;i++){vaFindKey=ValueUtil.split(vaFindRowKeys[i],":");if(vaFindKey.length==2){for(var j=0;j<vnDsCnt;j++){voDs=submission.getRequestData(j).data;if(voDs.type!="dataset"){continue}if(voDs.id==vaFindKey[0]){voDs._findRowCondition=vaFindKey[1];break}}}else{for(var j=0;j<vnDsCnt;j++){voDs=submission.getRequestData(j).data;if(voDs.type!="dataset"){continue}voDs._findRowCondition=vaFindKey[0]}}}}var idx=this._appKit._activeSubmission.indexOf(submission);if(idx!=-1){this._appKit._activeSubmission.splice(idx,1)}if(pbAppDisable===true&&pbSuccess!=true){this._appKit.coverPage(_app)}submission.removeAllFileParameters();submission.removeAllParameters();submission.removeAllEventListeners();if(this._appKit._activeSubmission.length==0){this._appKit.hideLoadMask(_app)}if(poCallbackFunc!=null&&(typeof poCallbackFunc=="function")){poCallbackFunc(pbSuccess,e.control)}};SubmissionKit.prototype._hasRequestData=function(poSubmission,psDataId){for(var i=0,len=poSubmission.getRequestDataCount();i<len;i++){if(poSubmission.getRequestData(i).data.id==psDataId){return true}}return false};SubmissionKit.prototype._hasResponseData=function(poSubmission,psDataId){for(var i=0,len=poSubmission.getResponseDataCount();i<len;i++){if(poSubmission.getResponseData(i).data.id==psDataId){return true}}return false};SubmissionKit.prototype.addParameter=function(app,psSubmissionId,psParamName,psValue){var vcSubmission=app.lookup(psSubmissionId);vcSubmission.addParameter(psParamName,psValue)};SubmissionKit.prototype.addFileParameter=function(app,psSubmissionId,paFiles){var vcSubmission=app.lookup(psSubmissionId);if(paFiles==null){return}if(paFiles instanceof Array){paFiles.forEach(function(voFile){vcSubmission.addFileParameter("exb.fileupload.filelist",voFile)})}else{vcSubmission.addFileParameter("exb.fileupload.filelist",paFiles)}};SubmissionKit.prototype.send=function(app,psSvcId,paParams,successCallback,pbAppEnable,pbAsync,maskType){var _app=app;var submission=_app.lookup(psSvcId);
  if(submission==null||!(submission instanceof cpr.protocols.Submission)){submission=_app.lookup("subCommExbuilder_"+psSvcId);if(submission==null){submission=new cpr.protocols.Submission("subCommExbuilder_"+psSvcId);submission.action="../CommSubmit/builder.do";submission.async=(pbAsync!="undefined"&&pbAsync!=null)?pbAsync:true;submission.mediaType="application/x-www-form-urlencoded";submission.method="post";submission.responseType="text";_app.register(submission)}if(!(paParams instanceof Array)){paParams=[paParams]}if(paParams.length>0){submission.removeAllRequestData();submission.removeAllResponseData();var dsReqParam=_app.lookup("dsCommExbuilderParam");if(dsReqParam==null){dsReqParam=new cpr.data.DataSet("dsCommExbuilderParam");dsReqParam.addColumn(new cpr.data.header.DataHeader("MAPPER","string"));dsReqParam.addColumn(new cpr.data.header.DataHeader("QRY","string"));dsReqParam.addColumn(new cpr.data.header.DataHeader("TYPE","string"));dsReqParam.addColumn(new cpr.data.header.DataHeader("IN_DS","string"));dsReqParam.addColumn(new cpr.data.header.DataHeader("OUT_DS","string"));dsReqParam.addColumn(new cpr.data.header.DataHeader("OUT_DS_TYPE","string"));dsReqParam.addColumn(new cpr.data.header.DataHeader("REQ_PARAM","string"));_app.register(dsReqParam)}else{dsReqParam.clear()}var dsReqCodeParam=_app.lookup("dsCommExbuilderCodeParam");if(dsReqCodeParam==null){dsReqCodeParam=new cpr.data.DataSet("dsCommExbuilderCodeParam");dsReqCodeParam.addColumn(new cpr.data.header.DataHeader("COMM_CD","string"));dsReqCodeParam.addColumn(new cpr.data.header.DataHeader("LCD","string"));dsReqCodeParam.addColumn(new cpr.data.header.DataHeader("SCD","string"));dsReqCodeParam.addColumn(new cpr.data.header.DataHeader("CAMP_FG","string"));dsReqCodeParam.addColumn(new cpr.data.header.DataHeader("USE_FG","string"));dsReqCodeParam.addColumn(new cpr.data.header.DataHeader("OUT_DS","string"));dsReqCodeParam.addColumn(new cpr.data.header.DataHeader("OUT_DS_TYPE","string"));_app.register(dsReqCodeParam)}else{dsReqCodeParam.clear()}var dmReqTimeParam=_app.lookup("dmCommExbuilderTimeParam");if(dmReqTimeParam==null){dmReqTimeParam=new cpr.data.DataMap("dmCommExbuilderTimeParam");dmReqTimeParam.addColumn(new cpr.data.header.DataHeader("NODE","string"));dmReqTimeParam.addColumn(new cpr.data.header.DataHeader("FORMAT","string"));dmReqTimeParam.addColumn(new cpr.data.header.DataHeader("OUT_DS","string"));dmReqTimeParam.addColumn(new cpr.data.header.DataHeader("OUT_DS_TYPE","string"));_app.register(dmReqTimeParam)}else{dmReqTimeParam.clear()}var voParam=null;for(var i=0,len=paParams.length;i<len;i++){voParam=paParams[i];if(!ValueUtil.isNull(voParam.mapper)&&!ValueUtil.isNull(voParam.qry)){var in_dataset=[];var out_dataset=[];if(!ValueUtil.isNull(voParam.inds)){var vaInDs=ValueUtil.split(voParam.inds,",");for(var k=0,klen=vaInDs.length;k<klen;k++){var vaInDsInfo=ValueUtil.split(ValueUtil.fixNull(vaInDs[k]),":");var voInDs=_app.lookup(vaInDsInfo[0]);if(voInDs&&!this._hasRequestData(submission,voInDs.id)){in_dataset.push(voInDs.id);
    if(vaInDsInfo.length==2){submission.addRequestData(voInDs,"",vaInDsInfo[1])}else{submission.addRequestData(voInDs,"")}}}}if(!ValueUtil.isNull(voParam.outds)){var vaOutDs=ValueUtil.split(voParam.outds,",");for(var k=0,klen=vaOutDs.length;k<klen;k++){var vaOutDsInfo=ValueUtil.split(ValueUtil.fixNull(vaOutDs[k]),":");var voOutDs=_app.lookup(vaOutDsInfo[0]);if(!this._hasResponseData(submission,voOutDs.id)){out_dataset.push(voOutDs.id);if(vaOutDsInfo.length==2){submission.addResponseData(voOutDs,ValueUtil.fixBoolean(vaOutDsInfo[1]))}else{submission.addResponseData(voOutDs,false)}}}}if(!(voParam.qry instanceof Array)){voParam.qry=[voParam.qry]}for(var j=0,jlen=voParam.qry.length;j<jlen;j++){var vaDsInfo=ValueUtil.split(voParam.qry[j],":");var vaSqlIds=ValueUtil.split(vaDsInfo[0],",");var vsDsId=ValueUtil.trim(vaDsInfo[1]);var vsOutDsType="";var vsInDsId="";var vsOutDsId="";for(var k=0,klen=vaSqlIds.length;k<klen;k++){vsInDsId="",vsOutDsId="",vsOutDsType="";for(var z=0,zlen=in_dataset.length;z<zlen;z++){if(vsDsId==in_dataset[z]){vsInDsId=in_dataset[z];break}}for(var z=0,zlen=out_dataset.length;z<zlen;z++){if(vsDsId==out_dataset[z]){vsOutDsId=out_dataset[z];break}}vsOutDsType=(_app.lookup(vsOutDsId) instanceof cpr.data.DataSet?"ds":"dm");dsReqParam.addRowData({MAPPER:voParam.mapper,QRY:ValueUtil.trim(vaSqlIds[k]),TYPE:(!ValueUtil.isNull(voParam.type)?voParam.type:"R"),IN_DS:vsInDsId,OUT_DS:vsOutDsId,REQ_PARAM:voParam.param,OUT_DS_TYPE:vsOutDsType})}}var voParamDs=_app.lookup(voParam.param);if(voParamDs&&!this._hasRequestData(submission,voParamDs.id)){submission.addRequestData(voParamDs,"","all")}}else{if(!ValueUtil.isNull(voParam.stime)){var vsTimeOutDsName=voParam.stime[0];var voOutDs=_app.lookup(vsTimeOutDsName);if(voOutDs==null){continue}if(!this._hasResponseData(submission,voOutDs.id)){submission.addResponseData(voOutDs,false)}dmReqTimeParam.setValue("NODE",voParam.stime[1]);dmReqTimeParam.setValue("OUT_DS",voParam.stime[0]);dmReqTimeParam.setValue("FORMAT",voParam.stime[2]);dmReqTimeParam.setValue("OUT_DS_TYPE",(voOutDs instanceof cpr.data.DataSet?"ds":"dm"))}else{var vsCodeOutDsName=voParam[0];var voOutDs=_app.lookup(vsCodeOutDsName);if(voOutDs==null){continue}if(!this._hasResponseData(submission,voOutDs.id)){submission.addResponseData(voOutDs,false)}dsReqCodeParam.addRowData({LCD:voParam[1],SCD:voParam[2],COMM_CD:voParam[3],CAMP_FG:voParam[4],USE_FG:voParam[5],OUT_DS:voParam[0],OUT_DS_TYPE:(voOutDs instanceof cpr.data.DataSet?"ds":"dm")})}}}dsReqParam.setRowStateAll(cpr.data.tabledata.RowState.UNCHANGED);dsReqCodeParam.setRowStateAll(cpr.data.tabledata.RowState.UNCHANGED);submission.addRequestData(dsReqParam,"","all");submission.addRequestData(dsReqCodeParam,"","all");submission.addRequestData(dmReqTimeParam,"","")}}if(!submission||submission.status=="SENDING"){return}if(submission.action.indexOf("/")==0){submission.action=".."+submission.action}this._appKit.showLoadMask(app,maskType);var vbSuccess=true;var _this=this;submission.addEventListenerOnce("before-submit",function(e){_this._onBeforeSubmit(e)
  });submission.addEventListenerOnce("receive",function(e){vbSuccess=_this._onSubmitReceive(e)});submission.addEventListenerOnce("submit-error",function(e){vbSuccess=_this._onSubmitError(e)});submission.addEventListenerOnce("submit-success",function(e){vbSuccess=_this._onSubmitSuccess(e,vbSuccess)});submission.addEventListenerOnce("submit-done",function(e){_this._onSubmitDone(e,successCallback,vbSuccess,pbAppEnable)});this._appKit._activeSubmission[this._appKit._activeSubmission.length]=submission;submission.send()};function ReportKit(appKit){this._appKit=appKit}ReportKit.prototype.init=function(app,psEmbPageId){var vcEmbPage=app.lookup(psEmbPageId);vcEmbPage.src="/jsp/blankReport.jsp"};ReportKit.prototype.open=function(app,psEmbPageId,psUrl,poParam,psPath,psBig){var vcEmbPage=app.lookup(psEmbPageId);var voMenuInfo=this._appKit.Auth.getMenuInfo(app);var strPgmPath=voMenuInfo.get("PGM_PATH");if(ValueUtil.isNull(strPgmPath)&&ValueUtil.isNull(psPath)){this._appKit.Msg.alert("�뚯씪寃쎈줈媛� 吏��뺣릺吏� �딆븯�듬땲��.");return}var arrPgmPath=!ValueUtil.isNull(psPath)?psPath.split("/"):strPgmPath.split("/");var strUrl=psUrl.replace("rox","ozr");var strUnit;if(!ValueUtil.isNull(psPath)){strUnit=arrPgmPath[0]}else{strUnit=arrPgmPath[1]}var REPORT_ID;switch(strUnit){case"adm":REPORT_ID="ADMN";break;case"aff":REPORT_ID="ADMN";break;case"acd":REPORT_ID="SCHAFF";break;case"entr":REPORT_ID="ENTREX";break;case"iacf":REPORT_ID="ADMN";break;case"adm_dir":REPORT_ID="ADMN";break;case"aff_dir":REPORT_ID="ADMN";break;case"acd_dir":REPORT_ID="SCHAFF";break;case"entr_dir":REPORT_ID="ENTREX";break;case"iacf_dir":REPORT_ID="ADMN";break;default:alert("�섎せ�� �붿껌�낅땲��.");alert(strPgmPath);return false}var printUrl="";if(psPath!=null){printUrl+=psPath+"/"+strUrl}else{strUnit="/"+strUnit+"_dir/";if(strUnit=="/entr_dir/"){printUrl+=strUnit+"/"+arrPgmPath[2]+"/"+strUrl}else{printUrl+=strUnit+arrPgmPath[2]+"/"+arrPgmPath[3]+"/"+strUrl}}var ozParam=printUrl;for(var param in poParam){ozParam+="|"+param+"="+poParam[param]}ozParam+="|serverNm="+REPORT_ID;ozParam+="|"+this._appKit.Auth.getUserInfo(app,"DEPT_NM")+"|"+this._appKit.Auth.getUserInfo(app,"USER_NM")+"|"+this._appKit.Auth.getUserInfo(app,"L_LOGIN_IP");ozParam=CryptoJS.AES.encrypt(ozParam,"/SM01dQ69b6xwIYgpR5vWIU40ugJZNRlGTrQgRjU454=");var voParamObj={strUrl:printUrl,strServerNm:REPORT_ID,strBig:psBig,params:poParam,ozParam:ozParam};var vsDeptCd=this._appKit.Auth.getUserInfo(app,"DEPT_CD");if(vsDeptCd=="127315"){this._appKit.Dialog.open(app,"app/sys/cmmn/CmmnPrintPopDlg",400,280,function(e){var dialog=e.control;var returnValue=dialog.returnValue;if(returnValue!=null){window.returnValue=voParamObj;vcEmbPage.src="/jsp/reportViewer.jsp?p="+(new Date().getMilliseconds())}else{if((!ValueUtil.isNull(app.getHost())&&app.app.isPopup===true)){app.close()}}},voParamObj)}else{window.returnValue=voParamObj;vcEmbPage.src="/jsp/reportViewer.jsp?p="+(new Date().getMilliseconds())}};ReportKit.prototype.openPopup=function(app,psUrl,poParam,psPath,pnWidth,pnHeight,psBig,handler){var initValue={strUrl:psUrl,strPath:psPath,strBig:psBig,voparam:poParam};
  var vnWidth=(pnWidth!=null&&pnWidth!=undefined)?pnWidth:1200;var vnHeight=(pnHeight!=null&&pnHeight!=undefined)?pnHeight:700;vnWidth=vnWidth>window.innerWidth?window.innerWidth-20:vnWidth;vnHeight=vnHeight>window.innerHeight?window.innerHeight-20:vnHeight;this._appKit.Dialog.open(app,"app/sys/cmmn/CmmnReport",vnWidth,vnHeight,function(e){var dialog=e.control;if(handler){dialog.addEventListenerOnce("close",handler)}},initValue)};ReportKit.prototype.close=function(app,psEmbPageId){var vcEmbPage=app.lookup(psEmbPageId);vcEmbPage.src="/jsp/blankReport.jsp"};function HeaderKit(appKit){this._appKit=appKit}HeaderKit.prototype.setEnable=function(app,pbEnable,paCtlId){if(!(paCtlId instanceof Array)){paCtlId=[paCtlId]}if(typeof(pbEnable)!="boolean"){pbEnable=ValueUtil.fixBoolean(pbEnable)}var appHeader=this._appKit.Group.getAllChildrenByType(app,"udc.com.appHeader");for(var i=0,len=appHeader.length;i<len;i++){var ctrl=appHeader[i];ctrl.setEnableCtrls(pbEnable,paCtlId)}};HeaderKit.prototype.dispatchEvent=function(app,psCtlId,psEventType){var header=this._appKit.Group.getAllChildrenByType(app,"udc.com.appHeader");if(header!=null&&header.length>0){var vcCtrl=header[0].getEmbeddedAppInstance().lookup(psCtlId);if(vcCtrl){if(psCtlId=="btnSearch"&&psEventType=="click"){app.setAppProperty("dispatchSearch",true)}vcCtrl.dispatchEvent(new cpr.events.CEvent(psEventType))}}};exports.MsgKit=MsgKit;exports.DialogKit=DialogKit;exports.GroupKit=GroupKit;exports.FreeFormKit=FreeFormKit;exports.SelectKit=SelectKit;exports.TreeKit=TreeKit;exports.TabKit=TabKit;exports.EmbeddedAppKit=EmbeddedAppKit;exports.MDIKit=MDIKit;exports.ControlKit=ControlKit;exports.DataSetKit=DataSetKit;exports.GridKit=GridKit;exports.SubmissionKit=SubmissionKit;exports.ReportKit=ReportKit;exports.HeaderKit=HeaderKit})})();
/// end - module/extension
/// start - module/util
(function(){cpr.core.Module.define("module/util",function(a,c,b){AppUtil={setAppProperty:function(i,e,h,d){d=d==null?true:d;var j=i;var f=j.getHostAppInstance();var g=j.getAppProperty(e);if(f&&f.lookup(g)&&f.lookup(g) instanceof cpr.controls.UIControl){if(d){f.lookup(g).value=h}else{f.lookup(g).putValue(h)}}else{j.setAppProperty(e,h)}},getUDCBindValueControl:function(f){var e=f;var d=f.getEmbeddedAppInstance();d.getContainer().getChildren().some(function(g){if(g.type=="container"){g.getChildren().some(function(h){if(h.getBindInfo("value")&&h.getBindInfo("value").property=="value"){e=h;return true}})}else{if(g.getBindInfo("value")&&g.getBindInfo("value").property=="value"){e=g;return true}}});return e}};ValueUtil={isNull:function(d){return(this.fixNull(d)=="")},isNumber:function(e){var d=Number(e);return isNaN(d)==false},fixNull:function(e){var d=typeof(e);if(d=="string"||(d=="object"&&e instanceof String)){e=this.trim(e)}return(e==null||e=="null"||e=="undefined")?"":String(e)},fixBoolean:function(d){if(typeof(d)=="boolean"||d instanceof Boolean){return d}if(typeof(d)=="number"||d instanceof Number){return d!=0}return(this.fixNull(d).toUpperCase()=="TRUE")},fixNumber:function(e){if(typeof(e)=="number"||e instanceof Number){return e}var d=Number(this.fixNull(e));return isNaN(d)?0:d},fixFloat:function(d){if(typeof(d)=="number"||d instanceof Number){return d}var e=parseFloat(this.fixNull(d));return isNaN(e)?0:e},trim:function(d){return d.replace(/(^\s*)|(\s*$)/g,"")},split:function(g,e){g=this.fixNull(g);var d=new Array();var f=g.split(e);var h=this;f.forEach(function(i){d.push(h.trim(i))});return d},getLength:function(h,g){if(!g){g="char"}var f=0;switch(g){case"utf8":for(var e=0,d=h.length;e<d;e++){if(escape(h.charAt(e)).length>=4){f+=3}else{if(escape(h.charAt(e))=="%A7"){f+=3}else{if(escape(h.charAt(e))!="%0D"){f++}else{f++}}}}break;case"ascii":for(var e=0,j;j=h.charCodeAt(e++);f+=j>>7?2:1){}break;default:f=h.length}return f}};DateUtil={format:function(g,p){var l={MONTH_IN_YEAR:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORT_MONTH_IN_YEAR:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],DAY_IN_WEEK:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],SHORT_DAY_IN_WEEK:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]};var k=g.getFullYear();var B=g.getMonth()+1;var u=g.getDate();var x=g.getDay();var o=g.getHours();var m=(o<12)?"AM":"PM";var f=(o>12)?(o-12):o;var s=g.getMinutes();var z=g.getSeconds();var A=""+k;var h=A.substr(2);var n=((""+B).length==1)?"0"+B:""+B;var w=l.MONTH_IN_YEAR[B-1];var t=l.SHORT_MONTH_IN_YEAR[B-1];var r=((""+u).length==1)?"0"+u:""+u;var y=l.DAY_IN_WEEK[x];var u=l.SHORT_DAY_IN_WEEK[x];var C=((""+o).length==1)?"0"+o:""+o;var d=((""+f).length==1)?"0"+f:""+f;var v=((""+s).length==1)?"0"+s:""+s;var q=((""+z).length==1)?"0"+z:""+z;var j=""+g.getMilliseconds();var i;var e=-1;if(typeof(p)=="undefined"){i="YYYYMMDD"}else{i=p}i=i.replace(/YYYY/g,A);
    i=i.replace(/yyyy/g,A);i=i.replace(/YY/g,h);i=i.replace(/MM/g,n);i=i.replace(/MON/g,w);i=i.replace(/mon/g,t);i=i.replace(/DD/g,r);i=i.replace(/dd/g,r);i=i.replace(/day/g,u);i=i.replace(/DAY/g,y);i=i.replace(/hh/g,d);i=i.replace(/HH/g,C);i=i.replace(/mm/g,v);i=i.replace(/ss/g,q);i=i.replace(/(\s+)a/g,"$1"+m);return i},isValid:function(f,i,e){var h=Number(f);var g=Number(i);var j=Number(e);var d=new Date(h,g-1,j);return d.getFullYear()==h&&d.getMonth()==g-1&&d.getDate()==j},addDate:function(j,h){var g=Number(j.substring(0,4));var f=Number(j.substring(4,6));var k=Number(j.substring(6,8));if(this.isValid(g,f,k)){var d=new Date(g,f-1,k);var i=1*24*60*60*1000;var e=d.getTime()+(Number(h)*Number(i));d.setTime(e);return this.format(d,"YYYYMMDD")}else{return j}},toDate:function(l,e){var d=new Date();var p,g;var f=["Y","M","D","H","m","s","S"];var n=f.length;var o=e.length;var m=[d.getFullYear(),d.getMonth()+1,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds()];for(var k=0;k<n;k++){p=e.indexOf(f[k]);if(p!=-1){g=1;for(var h=p+1;h<o;h++){if(e.charAt(h)!=f[k]){break}g++}m[k]=Number(l.substring(p,p+g))}else{if(k==0){m[0]=1900}else{if(k==2){m[2]=1}}}}if(m[0]<1900){if(m[0]<=d.getFullYear()%100){m[0]+=d.getFullYear()-(d.getFullYear()%100)}else{if(m[0]<100){m[0]+=1900}else{m[0]=1900}}}return new Date(m[0],m[1]-1,m[2],m[3],m[4],m[5],m[6])},getMonthLastDay:function(i,g){var f=Number(i.substring(0,4));var e=Number(i.substring(4,6));var d=new Date(f,e,0,1,0,0);if(g==null){return d.getDate()}else{var h=new Date(d.getFullYear(),d.getMonth()+1+g,0,1,0,0);return h.getDate()}},getDiffDay:function(d,e){var g=this.toDate(d,"YYYYMMDD");var f=this.toDate(e,"YYYYMMDD");return parseInt((f-g)/(1000*60*60*24))},getDiffMonth:function(j,f,l){(l=="Y")?l:"";var o=this.toDate(j,"YYYYMMDD");var n=this.toDate(f,"YYYYMMDD");var d=o.getFullYear();var h=o.getMonth()+1;var p=o.getDate();var k=n.getFullYear();var e=n.getMonth()+1;var i=n.getDate();var m=k-d;var g="";var q="";if(l=="Y"){if(i<p){e=e-1}}if(e<h){m=m-1;g=(e+12)-h}else{g=e-h}q=(12*m)+g;return(q<0)?0:q},addMinutes:function(i,g){var d=DateUtil.toDate(i,"HHmm");d.setMinutes(d.getMinutes()+g);var f=d.getHours();var e=d.getMinutes();var h="";var j="";if(f<10){h="0"+f}else{h=f+""}if(e<10){j="0"+e}else{j=e+""}return h+j},getCurrentTime:function(){return new Date().getTime()}};FileUtil={getPemitedFileExts:function(){var d=["JPG","PNG","GIF","BMP","TIF","TIFF","JFIF","TXT","CSV","HWP","DOCX","GNG","DOC","DOCM","PPT","PPTX","PPTM","PPS","PPSX","XLS","XLSX","XLSM","XLAM","XLA","PSD","PDF","ODS","OGG","ZIP","EGG","MP4","AVI","WMV","RAR","TAR","7Z","TBZ","TGZ","LZH","GZ","AI","RTF"];return d},getLimitedFileExts:function(){var d=new Array("A6P","AC","AS","ACR","ACTION","AIR","APP","APP","ASP","ASPX","AWK","BAT","CGI","CMD","COM","CSH","DEK","DLD","DS","EBM","ESH","EXE","EZS","FKY","FRS","FXP","GADGET","HMS","HTA","ICD","INX","IPF","ISU","JAR","JS","JSE","JSP","JSX","KIX","LUA","MCR","MEM","MPX","MS","MST","OBS","PAF","PEX","PHP","PIF","PL","PRC","PRG","PVD","PWC","PY","PYC","PYO","QPX","RBX","RGS","ROX","RPJ","SCAR","SCR","SCRIPT","SCT","SH","SHB","SHS","SPR","TLB","TMS","U3P","UDF","VB","VBE","VBS","VBSCRIPT","WCM","WPK","WS","WSF","XQT");
    return d},checkFileType:function(l,k,h){var o=null;if(!ValueUtil.isNull(h)){h=h.replace(/\./ig,"");o=ValueUtil.split(h,",")}if(o==null||o.length<1){o=FileUtil.getPemitedFileExts()}var q=false;var n=k.split(".");var d=n[n.length-1].toUpperCase();for(var f=0,p=o.length;f<p;f++){if(d==o[f].toUpperCase()){q=true;break}}if(!q){l.Msg.alert("WRN-M024",[d]);return q}var e=FileUtil.getLimitedFileExts();for(var g=0,m=e.length;g<m;g++){if(d==e[g]){l.Msg.alert("WRN-M024",[d]);q=false;break}}return q}}})})();
/// end - module/util
/// start - module/validation
(function(){cpr.core.Module.define("module/validation",function(exports,globals,module){module.depends("module/common");Validator=function(appKit){this._appKit=appKit};Validator.prototype.isEmail=function(value){if(!value){return true}if(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(value)){return true}return false};Validator.prototype.isURL=function(value){if(!value){return true}var regexp=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;if(regexp.test(value)){return true}return false};Validator.prototype.isBizCSN=function(value){if(!value){return true}if((value=(value+"").match(/\d{1}/g)).length!=10){return false}var sum=0,key=[1,3,7,1,3,7,1,3,5];for(var i=0;i<9;i++){sum+=(key[i]*Number(value[i]))}return(10-((sum+Math.floor(key[8]*Number(value[8])/10))%10))==Number(value[9])};Validator.prototype.isSSN=function(value){if(!value){return true}value=value.replace(/[\-]/g,"");var fmt=/^\d{6}[1234]\d{6}$/;if(!fmt.test(value)){return false}var birthYear=(value.charAt(7)<="2")?"19":"20";birthYear+=value.substr(0,2);var birthMonth=value.substr(2,2)-1;var birthDate=value.substr(4,2);var birth=new Date(birthYear,birthMonth,birthDate);if(birth.getYear()%100!=value.substr(0,2)||birth.getMonth()!=birthMonth||birth.getDate()!=birthDate){return false}var arrDivide=[2,3,4,5,6,7,8,9,2,3,4,5];var checkdigit=0;for(var i=0;i<value.length-1;i++){checkdigit+=parseInt(value.charAt(i))*parseInt(arrDivide[i])}checkdigit=(11-(checkdigit%11))%10;if(checkdigit!=value.charAt(12)){return false}else{return true}};Validator.prototype.isTelNo=function(value){if(!value){return true}if(/^\d{2,3}[\)\-\. ]?\d{3,4}[\-\. ]?\d{4}$/.test(value)){return true}return false};Validator.prototype.isTelMobile=function(value){if(!value){return true}if(/^01([0|1|6|7|8|9]?)[\-\. ]?([0-9]{3,4})[\-\. ]?([0-9]{4})$/.test(value)){return true}return false};Validator.prototype.isFunc=function(poFunc){if(poFunc!=null&&(typeof poFunc=="function")){return true}else{return false}};Validator.prototype.validate=function(ctrl,ctrlValue,poParentCtl,pnIdx,pnCellIdx,poRow,poMstCtrl){if(!ctrl){return true}if(ctrl.type=="output"||ctrl.type=="img"||ctrl.type=="button"){return true}var vsFieldLabel=ctrl.fieldLabel;if(ValueUtil.isNull(vsFieldLabel)&&ctrl.getHost){vsFieldLabel=ctrl.getHost().fieldLabel}function getGridFieldLabel(poParentCtl,psFieldLabel){if(poParentCtl instanceof cpr.controls.Grid){var vcDetailCtl=poParentCtl.detail.getColumn(pnCellIdx);var vaHeaderCtl=poParentCtl.header.getColumnByColIndex(vcDetailCtl.colIndex,vcDetailCtl.colSpan);if(vaHeaderCtl.length>0){var vcHeaderCtl=vaHeaderCtl[0];if(vcHeaderCtl){psFieldLabel=vcHeaderCtl.getText()
}}}return psFieldLabel}var _appKit=this._appKit;function parentValidMsg(psMsg,poParentCtl,pnIdx){if(poParentCtl instanceof cpr.controls.Grid){var vsMsg="";var vsDsRefKey="EX6_REF_KEY_";vsMsg="";if(!ValueUtil.isNull(poParentCtl.userAttr("masterCtrlId"))){if(poMstCtrl!=null){var vaPkColumnNames=ValueUtil.split(ValueUtil.fixNull(poMstCtrl.dataSet.info),",");var vaFilterColumnNames=ValueUtil.split(ValueUtil.fixNull(poMstCtrl.userAttr("detailFilterColumns")),",");var vsCondition="";if(vaPkColumnNames.length>0){if(vaFilterColumnNames!=null&&vaFilterColumnNames.length>0){vaPkColumnNames.some(function(columnName,idx){if(ValueUtil.isNull(columnName)){return false}var filterColumnName=columnName;for(var j=0,jlen=vaFilterColumnNames.length;j<jlen;j++){if(vaFilterColumnNames[j].indexOf(columnName+"->")!=-1){filterColumnName=vaFilterColumnNames[j].split("->")[1];break}}if(vsCondition==""){vsCondition+=columnName+"=='"+poRow.getValue(filterColumnName)+"'"}else{vsCondition+="&&"+columnName+"=='"+poRow.getValue(filterColumnName)+"'"}})}else{vaPkColumnNames.some(function(columnName,idx){if(ValueUtil.isNull(columnName)){return false}if(vsCondition==""){vsCondition+=columnName+"=='"+poRow.getValue(columnName)+"'"}else{vsCondition+="&&"+columnName+"=='"+poRow.getValue(columnName)+"'"}})}}var voMstRow=poMstCtrl.findFirstRow(vsCondition);if(voMstRow){var vnCurrentIdx=poMstCtrl.selectionUnit!="cell"?poMstCtrl.getSelectedRowIndex():poMstCtrl.getSelectedIndices()[0]["rowIndex"];if(vnCurrentIdx==voMstRow.getIndex()){poMstCtrl.selectRows(-1)}poMstCtrl.selectRows(voMstRow.getIndex())}}var vsCondition="";if(poRow.getState()==cpr.data.tabledata.RowState.INSERTED){vsCondition=vsDsRefKey+" =='"+poRow.getValue(vsDsRefKey)+"'"}else{var vaPkColumnNames=ValueUtil.split(ValueUtil.fixNull(poParentCtl.dataSet.info),",");vaPkColumnNames.some(function(columnName,idx){if(ValueUtil.isNull(columnName)){return false}if(vsCondition==""){vsCondition+=columnName+"=='"+poRow.getValue(columnName)+"'"}else{vsCondition+="&&"+columnName+"=='"+poRow.getValue(columnName)+"'"}})}var focusRow=poParentCtl.dataSet.findFirstRow(vsCondition);pnIdx=focusRow!=null?focusRow.getIndex():pnIdx}vsMsg=_appKit.Msg.getMsg("WRN-M002",[poParentCtl.fieldLabel,Number(pnIdx)+1]);psMsg=vsMsg+" "+psMsg}_appKit.Msg.alert(psMsg,"WARNING")}var notnull="";if(poParentCtl instanceof cpr.controls.Grid&&ctrl instanceof cpr.controls.UDCBase){notnull=ctrl.getAppProperty("required")===true||ctrl.getAppProperty("required")==="Y"?"Y":""}else{notnull=ctrl.userAttr("required")}if(notnull==="Y"){if(ctrlValue==null||new String(ctrlValue)==""){vsFieldLabel=getGridFieldLabel(poParentCtl,vsFieldLabel);var vsMsg=this._appKit.Msg.getMsg("WRN-M001",[vsFieldLabel]);parentValidMsg(vsMsg,poParentCtl,pnIdx);return false}}var xorNull=ctrl.userAttr("xorRequired");if(xorNull){var vaXorNull=ValueUtil.split(xorNull.replace(/\[|\]/g,""),",");var vsName="";var vbStatus=false;if(poParentCtl instanceof cpr.controls.Grid){for(var j=0;j<vaXorNull.length;j++){var vsValue=poRow!=null?poRow.getValue(vaXorNull[j]):poParentCtl.getCellValue(pnIdx,vaXorNull[j]);
  if(!ValueUtil.isNull(vsValue)){vbStatus=true;break}var vaDetailCell=poParentCtl.detail.getColumnByName(vaXorNull[j]);vaDetailCell.some(function(vcCell){var vcHeaderCtl=poParentCtl.header.getColumn(vcCell.colIndex).control;if(vcHeaderCtl){vsName+=vcHeaderCtl.getText()+" ,"}})}if(!vbStatus){var vsMsg=this._appKit.Msg.getMsg("WRN-M003",[vsName.substring(0,vsName.length-1)]);parentValidMsg(vsMsg,poParentCtl,pnIdx);return false}}else{for(var j=0;j<vaXorNull.length;j++){var vcCtl=ctrl.getAppInstance().lookup(vaXorNull[j]);var vsValue=vcCtl.value;if(!ValueUtil.isNull(vsValue)){vbStatus=true;break}vsName+=vcCtl.fieldLabel+" ,"}if(!vbStatus){var vsMsg=this._appKit.Msg.getMsg("WRN-M003",[vsName.substring(0,vsName.length-1)]);parentValidMsg(vsMsg,poParentCtl,pnIdx);return false}}}if(ctrlValue==null||ctrlValue==""){return true}var type=ctrl.userAttr("columnType");if(type){var isChk=true;if(type=="email"){isChk=this.isEmail(ctrlValue)}else{if(type=="ssn"){isChk=this.isSSN(ctrlValue)}else{if(type=="bizno"){isChk=this.isBizCSN(ctrlValue)}else{if(type=="phone"){isChk=this.isTelMobile(ctrlValue)}else{if(type=="tel"){isChk=this.isTelNo(ctrlValue)}else{if(type=="url"){isChk=this.isURL(ctrlValue)}}}}}}if(isChk==false){vsFieldLabel=getGridFieldLabel(poParentCtl,vsFieldLabel);var vsMsg=this._appKit.Msg.getMsg("WRN-M004",[vsFieldLabel]);parentValidMsg(vsMsg,poParentCtl,pnIdx);return false}}var minlength=ctrl.userAttr("minlength");if(minlength){var minlengthNum=Number(minlength);var length=ValueUtil.getLength(ctrlValue,ctrl.lengthUnit);if(length<minlength){vsFieldLabel=getGridFieldLabel(poParentCtl,vsFieldLabel);var vsMsg=this._appKit.Msg.getMsg("WRN-M005",[vsFieldLabel,minlength]);parentValidMsg(vsMsg,poParentCtl,pnIdx);return false}}var fixlength=ctrl.userAttr("fixlength");if(fixlength){var fixlength=Number(fixlength);var length=ValueUtil.getLength(ctrlValue,ctrl.lengthUnit);if(length!=fixlength){vsFieldLabel=getGridFieldLabel(poParentCtl,vsFieldLabel);var vsMsg=this._appKit.Msg.getMsg("WRN-M006",[vsFieldLabel,fixlength]);parentValidMsg(vsMsg,poParentCtl,pnIdx);return false}}var compare=ctrl.userAttr("compare");if(!ValueUtil.isNull(compare)){var compareCol=compare.substring(0,compare.indexOf(","));var compareType=compare.substr(compare.indexOf(",")+1).trim();var vbStatus=false;var vsCompareColValue;var vsCompareColLable;var value=ctrlValue;if(poParentCtl instanceof cpr.controls.Grid){vsCompareColValue=poRow!=null?poRow.getValue(compareCol):poParentCtl.getCellValue(pnIdx,compareCol);var vcDetailColumn=poParentCtl.detail.getColumnByName(compareCol)[0];var vaHeaderCol=poParentCtl.header.getColumnByColIndex(vcDetailColumn.colIndex,vcDetailColumn.colSpan);if(vaHeaderCol.length>0){var vcHeaderCtl=vaHeaderCol[0];if(vcHeaderCtl){vsCompareColLable=vcHeaderCtl.getText()}}}else{vsCompareColValue=ctrl.getAppInstance().lookup(compareCol).value;vsCompareColLable=ctrl.getAppInstance().lookup(compareCol).fieldLabel}if(!ValueUtil.isNull(value)&&!ValueUtil.isNull(vsCompareColValue)){var vbReturn=false;
  if(ValueUtil.isNumber(value)&&ValueUtil.isNumber(vsCompareColValue)){vbReturn=eval(value+compareType+vsCompareColValue)}else{vbReturn=eval("'"+value+"'"+compareType+"'"+vsCompareColValue+"'")}if(!vbReturn){vsFieldLabel=getGridFieldLabel(poParentCtl,vsFieldLabel);var vsMsg="";if(compareType=="<="||compareType=="<"){vsMsg=this._appKit.Msg.getMsg("WRN-M009",[vsFieldLabel,vsCompareColLable])}else{if(compareType==">="||compareType==">"){vsMsg=this._appKit.Msg.getMsg("WRN-M010",[vsFieldLabel,vsCompareColLable])}else{if(compareType=="=="||compareType=="="){vsMsg=this._appKit.Msg.getMsg("WRN-M011",[vsFieldLabel,vsCompareColLable])}else{}}}parentValidMsg(vsMsg,poParentCtl,pnIdx);return false}}}return true}})})();
/// end - module/validation